(function(){function k(c){function f(e){this.data="";this.read=0;if("string"===typeof e)this.data=e;else if(d.isArrayBuffer(e)||d.isArrayBufferView(e)){e=new Uint8Array(e);try{this.data=String.fromCharCode.apply(null,e)}catch(a){for(var b=0;b<e.length;++b)this.putByte(e[b])}}else if(e instanceof f||"object"===typeof e&&"string"===typeof e.data&&"number"===typeof e.read)this.data=e.data,this.read=e.read;this._constructedStringLength=0}var d=c.util=c.util||{};(function(){if("undefined"!==typeof process&&
process.nextTick)d.nextTick=process.nextTick,d.setImmediate="function"===typeof setImmediate?setImmediate:d.nextTick;else if("function"===typeof setImmediate)d.setImmediate=setImmediate,d.nextTick=function(e){return setImmediate(e)};else{d.setImmediate=function(e){setTimeout(e,0)};if("undefined"!==typeof window&&"function"===typeof window.postMessage){var e=[];d.setImmediate=function(a){e.push(a);1===e.length&&window.postMessage("forge.setImmediate","*")};window.addEventListener("message",function(a){a.source===
window&&"forge.setImmediate"===a.data&&(a.stopPropagation(),a=e.slice(),e.length=0,a.forEach(function(e){e()}))},!0)}if("undefined"!==typeof MutationObserver){var a=Date.now(),b=!0,c=document.createElement("div"),e=[];(new MutationObserver(function(){var a=e.slice();e.length=0;a.forEach(function(e){e()})})).observe(c,{attributes:!0});var n=d.setImmediate;d.setImmediate=function(d){15<Date.now()-a?(a=Date.now(),n(d)):(e.push(d),1===e.length&&c.setAttribute("a",b=!b))}}d.nextTick=d.setImmediate}})();
d.isArray=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)};d.isArrayBuffer=function(e){return"undefined"!==typeof ArrayBuffer&&e instanceof ArrayBuffer};d.isArrayBufferView=function(e){return e&&d.isArrayBuffer(e.buffer)&&void 0!==e.byteLength};d.ByteBuffer=f;d.ByteStringBuffer=f;d.ByteStringBuffer.prototype._optimizeConstructedString=function(e){this._constructedStringLength+=e;4096<this._constructedStringLength&&(this.data.substr(0,1),this._constructedStringLength=
0)};d.ByteStringBuffer.prototype.length=function(){return this.data.length-this.read};d.ByteStringBuffer.prototype.isEmpty=function(){return 0>=this.length()};d.ByteStringBuffer.prototype.putByte=function(e){return this.putBytes(String.fromCharCode(e))};d.ByteStringBuffer.prototype.fillWithByte=function(e,a){e=String.fromCharCode(e);for(var b=this.data;0<a;)a&1&&(b+=e),a>>>=1,0<a&&(e+=e);this.data=b;this._optimizeConstructedString(a);return this};d.ByteStringBuffer.prototype.putBytes=function(e){this.data+=
e;this._optimizeConstructedString(e.length);return this};d.ByteStringBuffer.prototype.putString=function(e){return this.putBytes(d.encodeUtf8(e))};d.ByteStringBuffer.prototype.putInt16=function(e){return this.putBytes(String.fromCharCode(e>>8&255)+String.fromCharCode(e&255))};d.ByteStringBuffer.prototype.putInt24=function(e){return this.putBytes(String.fromCharCode(e>>16&255)+String.fromCharCode(e>>8&255)+String.fromCharCode(e&255))};d.ByteStringBuffer.prototype.putInt32=function(e){return this.putBytes(String.fromCharCode(e>>
24&255)+String.fromCharCode(e>>16&255)+String.fromCharCode(e>>8&255)+String.fromCharCode(e&255))};d.ByteStringBuffer.prototype.putInt16Le=function(e){return this.putBytes(String.fromCharCode(e&255)+String.fromCharCode(e>>8&255))};d.ByteStringBuffer.prototype.putInt24Le=function(e){return this.putBytes(String.fromCharCode(e&255)+String.fromCharCode(e>>8&255)+String.fromCharCode(e>>16&255))};d.ByteStringBuffer.prototype.putInt32Le=function(e){return this.putBytes(String.fromCharCode(e&255)+String.fromCharCode(e>>
8&255)+String.fromCharCode(e>>16&255)+String.fromCharCode(e>>24&255))};d.ByteStringBuffer.prototype.putInt=function(e,a){var b="";do a-=8,b+=String.fromCharCode(e>>a&255);while(0<a);return this.putBytes(b)};d.ByteStringBuffer.prototype.putSignedInt=function(e,a){0>e&&(e+=2<<a-1);return this.putInt(e,a)};d.ByteStringBuffer.prototype.putBuffer=function(e){return this.putBytes(e.getBytes())};d.ByteStringBuffer.prototype.getByte=function(){return this.data.charCodeAt(this.read++)};d.ByteStringBuffer.prototype.getInt16=
function(){var e=this.data.charCodeAt(this.read)<<8^this.data.charCodeAt(this.read+1);this.read+=2;return e};d.ByteStringBuffer.prototype.getInt24=function(){var e=this.data.charCodeAt(this.read)<<16^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2);this.read+=3;return e};d.ByteStringBuffer.prototype.getInt32=function(){var e=this.data.charCodeAt(this.read)<<24^this.data.charCodeAt(this.read+1)<<16^this.data.charCodeAt(this.read+2)<<8^this.data.charCodeAt(this.read+3);this.read+=
4;return e};d.ByteStringBuffer.prototype.getInt16Le=function(){var e=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8;this.read+=2;return e};d.ByteStringBuffer.prototype.getInt24Le=function(){var e=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16;this.read+=3;return e};d.ByteStringBuffer.prototype.getInt32Le=function(){var e=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+
2)<<16^this.data.charCodeAt(this.read+3)<<24;this.read+=4;return e};d.ByteStringBuffer.prototype.getInt=function(e){var a=0;do a=(a<<8)+this.data.charCodeAt(this.read++),e-=8;while(0<e);return a};d.ByteStringBuffer.prototype.getSignedInt=function(e){var a=this.getInt(e);e=2<<e-2;a>=e&&(a-=e<<1);return a};d.ByteStringBuffer.prototype.getBytes=function(e){var a;e?(e=Math.min(this.length(),e),a=this.data.slice(this.read,this.read+e),this.read+=e):0===e?a="":(a=0===this.read?this.data:this.data.slice(this.read),
this.clear());return a};d.ByteStringBuffer.prototype.bytes=function(e){return"undefined"===typeof e?this.data.slice(this.read):this.data.slice(this.read,this.read+e)};d.ByteStringBuffer.prototype.at=function(e){return this.data.charCodeAt(this.read+e)};d.ByteStringBuffer.prototype.setAt=function(e,a){this.data=this.data.substr(0,this.read+e)+String.fromCharCode(a)+this.data.substr(this.read+e+1);return this};d.ByteStringBuffer.prototype.last=function(){return this.data.charCodeAt(this.data.length-
1)};d.ByteStringBuffer.prototype.copy=function(){var e=d.createBuffer(this.data);e.read=this.read;return e};d.ByteStringBuffer.prototype.compact=function(){0<this.read&&(this.data=this.data.slice(this.read),this.read=0);return this};d.ByteStringBuffer.prototype.clear=function(){this.data="";this.read=0;return this};d.ByteStringBuffer.prototype.truncate=function(e){e=Math.max(0,this.length()-e);this.data=this.data.substr(this.read,e);this.read=0;return this};d.ByteStringBuffer.prototype.toHex=function(){for(var e=
"",a=this.read;a<this.data.length;++a){var b=this.data.charCodeAt(a);16>b&&(e+="0");e+=b.toString(16)}return e};d.ByteStringBuffer.prototype.toString=function(){return d.decodeUtf8(this.bytes())};d.DataBuffer=function(e,a){a=a||{};this.read=a.readOffset||0;this.growSize=a.growSize||1024;var b=d.isArrayBuffer(e),c=d.isArrayBufferView(e);b||c?(this.data=b?new DataView(e):new DataView(e.buffer,e.byteOffset,e.byteLength),this.write="writeOffset"in a?a.writeOffset:this.data.byteLength):(this.data=new DataView(new ArrayBuffer(0)),
this.write=0,null!==e&&void 0!==e&&this.putBytes(e),"writeOffset"in a&&(this.write=a.writeOffset))};d.DataBuffer.prototype.length=function(){return this.write-this.read};d.DataBuffer.prototype.isEmpty=function(){return 0>=this.length()};d.DataBuffer.prototype.accommodate=function(e,a){if(this.length()>=e)return this;a=Math.max(a||this.growSize,e);var b=new Uint8Array(this.data.buffer,this.data.byteOffset,this.data.byteLength),c=new Uint8Array(this.length()+a);c.set(b);this.data=new DataView(c.buffer);
return this};d.DataBuffer.prototype.putByte=function(e){this.accommodate(1);this.data.setUint8(this.write++,e);return this};d.DataBuffer.prototype.fillWithByte=function(e,a){this.accommodate(a);for(var b=0;b<a;++b)this.data.setUint8(e);return this};d.DataBuffer.prototype.putBytes=function(e,a){if(d.isArrayBufferView(e)){var b=new Uint8Array(e.buffer,e.byteOffset,e.byteLength),c=b.byteLength-b.byteOffset;this.accommodate(c);var n=new Uint8Array(this.data.buffer,this.write);n.set(b);this.write+=c;return this}if(d.isArrayBuffer(e))return b=
new Uint8Array(e),this.accommodate(b.byteLength),n=new Uint8Array(this.data.buffer),n.set(b,this.write),this.write+=b.byteLength,this;if(e instanceof d.DataBuffer||"object"===typeof e&&"number"===typeof e.read&&"number"===typeof e.write&&d.isArrayBufferView(e.data))return b=new Uint8Array(e.data.byteLength,e.read,e.length()),this.accommodate(b.byteLength),n=new Uint8Array(e.data.byteLength,this.write),n.set(b),this.write+=b.byteLength,this;e instanceof d.ByteStringBuffer&&(e=e.data,a="binary");a=
a||"binary";if("string"===typeof e){if("hex"===a)return this.accommodate(Math.ceil(e.length/2)),b=new Uint8Array(this.data.buffer,this.write),this.write+=d.binary.hex.decode(e,b,this.write),this;if("base64"===a)return this.accommodate(3*Math.ceil(e.length/4)),b=new Uint8Array(this.data.buffer,this.write),this.write+=d.binary.base64.decode(e,b,this.write),this;"utf8"===a&&(e=d.encodeUtf8(e),a="binary");if("binary"===a||"raw"===a)return this.accommodate(e.length),b=new Uint8Array(this.data.buffer,this.write),
this.write+=d.binary.raw.decode(b),this;if("utf16"===a)return this.accommodate(2*e.length),b=new Uint16Array(this.data.buffer,this.write),this.write+=d.text.utf16.encode(b),this;throw Error("Invalid encoding: "+a);}throw Error("Invalid parameter: "+e);};d.DataBuffer.prototype.putBuffer=function(e){this.putBytes(e);e.clear();return this};d.DataBuffer.prototype.putString=function(e){return this.putBytes(e,"utf16")};d.DataBuffer.prototype.putInt16=function(e){this.accommodate(2);this.data.setInt16(this.write,
e);this.write+=2;return this};d.DataBuffer.prototype.putInt24=function(e){this.accommodate(3);this.data.setInt16(this.write,e>>8&65535);this.data.setInt8(this.write,e>>16&255);this.write+=3;return this};d.DataBuffer.prototype.putInt32=function(e){this.accommodate(4);this.data.setInt32(this.write,e);this.write+=4;return this};d.DataBuffer.prototype.putInt16Le=function(e){this.accommodate(2);this.data.setInt16(this.write,e,!0);this.write+=2;return this};d.DataBuffer.prototype.putInt24Le=function(e){this.accommodate(3);
this.data.setInt8(this.write,e>>16&255);this.data.setInt16(this.write,e>>8&65535,!0);this.write+=3;return this};d.DataBuffer.prototype.putInt32Le=function(e){this.accommodate(4);this.data.setInt32(this.write,e,!0);this.write+=4;return this};d.DataBuffer.prototype.putInt=function(e,a){this.accommodate(a/8);do a-=8,this.data.setInt8(this.write++,e>>a&255);while(0<a);return this};d.DataBuffer.prototype.putSignedInt=function(e,a){this.accommodate(a/8);0>e&&(e+=2<<a-1);return this.putInt(e,a)};d.DataBuffer.prototype.getByte=
function(){return this.data.getInt8(this.read++)};d.DataBuffer.prototype.getInt16=function(){var e=this.data.getInt16(this.read);this.read+=2;return e};d.DataBuffer.prototype.getInt24=function(){var e=this.data.getInt16(this.read)<<8^this.data.getInt8(this.read+2);this.read+=3;return e};d.DataBuffer.prototype.getInt32=function(){var e=this.data.getInt32(this.read);this.read+=4;return e};d.DataBuffer.prototype.getInt16Le=function(){var e=this.data.getInt16(this.read,!0);this.read+=2;return e};d.DataBuffer.prototype.getInt24Le=
function(){var e=this.data.getInt8(this.read)^this.data.getInt16(this.read+1,!0)<<8;this.read+=3;return e};d.DataBuffer.prototype.getInt32Le=function(){var e=this.data.getInt32(this.read,!0);this.read+=4;return e};d.DataBuffer.prototype.getInt=function(e){var a=0;do a=(a<<8)+this.data.getInt8(this.read++),e-=8;while(0<e);return a};d.DataBuffer.prototype.getSignedInt=function(e){var a=this.getInt(e);e=2<<e-2;a>=e&&(a-=e<<1);return a};d.DataBuffer.prototype.getBytes=function(e){var a;e?(e=Math.min(this.length(),
e),a=this.data.slice(this.read,this.read+e),this.read+=e):0===e?a="":(a=0===this.read?this.data:this.data.slice(this.read),this.clear());return a};d.DataBuffer.prototype.bytes=function(e){return"undefined"===typeof e?this.data.slice(this.read):this.data.slice(this.read,this.read+e)};d.DataBuffer.prototype.at=function(e){return this.data.getUint8(this.read+e)};d.DataBuffer.prototype.setAt=function(e,a){this.data.setUint8(e,a);return this};d.DataBuffer.prototype.last=function(){return this.data.getUint8(this.write-
1)};d.DataBuffer.prototype.copy=function(){return new d.DataBuffer(this)};d.DataBuffer.prototype.compact=function(){if(0<this.read){var e=new Uint8Array(this.data.buffer,this.read),a=new Uint8Array(e.byteLength);a.set(e);this.data=new DataView(a);this.write-=this.read;this.read=0}return this};d.DataBuffer.prototype.clear=function(){this.data=new DataView(new ArrayBuffer(0));this.read=this.write=0;return this};d.DataBuffer.prototype.truncate=function(e){this.write=Math.max(0,this.length()-e);this.read=
Math.min(this.read,this.write);return this};d.DataBuffer.prototype.toHex=function(){for(var e="",a=this.read;a<this.data.byteLength;++a){var b=this.data.getUint8(a);16>b&&(e+="0");e+=b.toString(16)}return e};d.DataBuffer.prototype.toString=function(e){var a=new Uint8Array(this.data,this.read,this.length());e=e||"utf8";if("binary"===e||"raw"===e)return d.binary.raw.encode(a);if("hex"===e)return d.binary.hex.encode(a);if("base64"===e)return d.binary.base64.encode(a);if("utf8"===e)return d.text.utf8.decode(a);
if("utf16"===e)return d.text.utf16.decode(a);throw Error("Invalid encoding: "+e);};d.createBuffer=function(e,a){void 0!==e&&"utf8"===(a||"raw")&&(e=d.encodeUtf8(e));return new d.ByteBuffer(e)};d.fillString=function(e,a){for(var b="";0<a;)a&1&&(b+=e),a>>>=1,0<a&&(e+=e);return b};d.xorBytes=function(e,a,b){for(var c="",n="",d="",g=0,h=0;0<b;--b,++g)n=e.charCodeAt(g)^a.charCodeAt(g),10<=h&&(c+=d,d="",h=0),d+=String.fromCharCode(n),++h;return c+d};d.hexToBytes=function(e){var a="",b=0;e.length&1&&(b=
1,a+=String.fromCharCode(parseInt(e.substr(0,1),16)));for(;b<e.length;b+=2)a+=String.fromCharCode(parseInt(e.substr(b,2),16));return a};d.bytesToHex=function(e){return d.createBuffer(e).toHex()};d.int32ToBytes=function(e){return String.fromCharCode(e>>24&255)+String.fromCharCode(e>>16&255)+String.fromCharCode(e>>8&255)+String.fromCharCode(e&255)};var k=[62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,64,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,
-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51];d.encode64=function(e,a){for(var b="",c="",n,d,g,h=0;h<e.length;)n=e.charCodeAt(h++),d=e.charCodeAt(h++),g=e.charCodeAt(h++),b+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(n>>2),b+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt((n&3)<<4|d>>4),isNaN(d)?b+="==":(b+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt((d&15)<<2|g>>6),b+=
isNaN(g)?"=":"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(g&63)),a&&b.length>a&&(c+=b.substr(0,a)+"\r\n",b=b.substr(a));return c+b};d.decode64=function(e){e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");for(var a="",b,c,n,d,g=0;g<e.length;)b=k[e.charCodeAt(g++)-43],c=k[e.charCodeAt(g++)-43],n=k[e.charCodeAt(g++)-43],d=k[e.charCodeAt(g++)-43],a+=String.fromCharCode(b<<2|c>>4),64!==n&&(a+=String.fromCharCode((c&15)<<4|n>>2),64!==d&&(a+=String.fromCharCode((n&3)<<6|d)));return a};
d.encodeUtf8=function(e){return unescape(encodeURIComponent(e))};d.decodeUtf8=function(e){return decodeURIComponent(escape(e))};d.binary={raw:{},hex:{},base64:{}};d.binary.raw.encode=function(e){return String.fromCharCode.apply(null,e)};d.binary.raw.decode=function(e,a,b){var c=a;c||(c=new Uint8Array(e.length));for(var n=b=b||0,d=0;d<e.length;++d)c[n++]=e.charCodeAt(d);return a?n-b:c};d.binary.hex.encode=d.bytesToHex;d.binary.hex.decode=function(e,a,b){var c=a;c||(c=new Uint8Array(Math.ceil(e.length/
2)));b=b||0;var n=0,d=b;e.length&1&&(n=1,c[d++]=parseInt(e[0],16));for(;n<e.length;n+=2)c[d++]=parseInt(e.substr(n,2),16);return a?d-b:c};d.binary.base64.encode=function(e,a){for(var b="",c="",d,g,h,p=0;p<e.byteLength;)d=e[p++],g=e[p++],h=e[p++],b+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(d>>2),b+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt((d&3)<<4|g>>4),isNaN(g)?b+="==":(b+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt((g&
15)<<2|h>>6),b+=isNaN(h)?"=":"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(h&63)),a&&b.length>a&&(c+=b.substr(0,a)+"\r\n",b=b.substr(a));return c+b};d.binary.base64.decode=function(e,a,b){var c=a;c||(c=new Uint8Array(3*Math.ceil(e.length/4)));e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");b=b||0;for(var d,g,h,p,l=0,s=b;l<e.length;)d=k[e.charCodeAt(l++)-43],g=k[e.charCodeAt(l++)-43],h=k[e.charCodeAt(l++)-43],p=k[e.charCodeAt(l++)-43],c[s++]=d<<2|g>>4,64!==h&&(c[s++]=(g&15)<<4|h>>
2,64!==p&&(c[s++]=(h&3)<<6|p));return a?s-b:c.subarray(0,s)};d.text={utf8:{},utf16:{}};d.text.utf8.encode=function(e,a,b){e=d.encodeUtf8(e);var c=a;c||(c=new Uint8Array(e.length));for(var n=b=b||0,g=0;g<e.length;++g)c[n++]=e.charCodeAt(g);return a?n-b:c};d.text.utf8.decode=function(e){return d.decodeUtf8(String.fromCharCode.apply(null,e))};d.text.utf16.encode=function(e,a,b){var c=a;c||(c=new Uint8Array(e.length));for(var d=new Uint16Array(c),g=b=b||0,h=b,p=0;p<e.length;++p)d[h++]=e.charCodeAt(p),
g+=2;return a?g-b:c};d.text.utf16.decode=function(e){return String.fromCharCode.apply(null,new Uint16Array(e))};d.deflate=function(e,a,b){a=d.decode64(e.deflate(d.encode64(a)).rval);b&&(e=2,a.charCodeAt(1)&32&&(e=6),a=a.substring(e,a.length-4));return a};d.inflate=function(e,a,b){e=e.inflate(d.encode64(a)).rval;return null===e?null:d.decode64(e)};var b=function(e,a,b){if(!e)throw Error("WebStorage not available.");null===b?e=e.removeItem(a):(b=d.encode64(JSON.stringify(b)),e=e.setItem(a,b));if("undefined"!==
typeof e&&!0!==e.rval)throw a=Error(e.error.message),a.id=e.error.id,a.name=e.error.name,a;},s=function(e,a){if(!e)throw Error("WebStorage not available.");var b=e.getItem(a);if(e.init)if(null===b.rval){if(b.error){var c=Error(b.error.message);c.id=b.error.id;c.name=b.error.name;throw c;}b=null}else b=b.rval;null!==b&&(b=JSON.parse(d.decode64(b)));return b},l=function(e,a,c,d){var n=s(e,a);null===n&&(n={});n[c]=d;b(e,a,n)},a=function(e,a,b){e=s(e,a);null!==e&&(e=b in e?e[b]:null);return e},g=function(e,
a,c){var d=s(e,a);if(null!==d&&c in d){delete d[c];c=!0;for(var n in d){c=!1;break}c&&(d=null);b(e,a,d)}},h=function(e,a){b(e,a,null)},p=function(e,a,b){var c=null;"undefined"===typeof b&&(b=["web","flash"]);var d,g=!1,h=null,p;for(p in b){d=b[p];try{if("flash"===d||"both"===d){if(null===a[0])throw Error("Flash local storage not available.");c=e.apply(this,a);g="flash"===d}if("web"===d||"both"===d)a[0]=localStorage,c=e.apply(this,a),g=!0}catch(l){h=l}if(g)break}if(!g)throw h;return c};d.setItem=function(a,
b,c,d,n){p(l,arguments,n)};d.getItem=function(e,b,c,d){return p(a,arguments,d)};d.removeItem=function(a,b,c,d){p(g,arguments,d)};d.clearItems=function(a,b,c){p(h,arguments,c)};d.parseUrl=function(a){var b=/^(https?):\/\/([^:&^\/]*):?(\d*)(.*)$/g;b.lastIndex=0;b=b.exec(a);if(a=null===b?null:{full:a,scheme:b[1],host:b[2],port:b[3],path:b[4]})a.fullHost=a.host,a.port?80!==a.port&&"http"===a.scheme?a.fullHost+=":"+a.port:443!==a.port&&"https"===a.scheme&&(a.fullHost+=":"+a.port):"http"===a.scheme?a.port=
80:"https"===a.scheme&&(a.port=443),a.full=a.scheme+"://"+a.fullHost;return a};var t=null;d.getQueryVariables=function(a){var b=function(a){var e={};a=a.split("&");for(var b=0;b<a.length;b++){var c=a[b].indexOf("="),d;0<c?(d=a[b].substring(0,c),c=a[b].substring(c+1)):(d=a[b],c=null);d in e||(e[d]=[]);d in Object.prototype||null===c||e[d].push(unescape(c))}return e};"undefined"===typeof a?(null===t&&(t="undefined"!==typeof window&&window.location&&window.location.search?b(window.location.search.substring(1)):
{}),a=t):a=b(a);return a};d.parseFragment=function(a){var b=a,c="",g=a.indexOf("?");0<g&&(b=a.substring(0,g),c=a.substring(g+1));a=b.split("/");0<a.length&&""===a[0]&&a.shift();g=""===c?{}:d.getQueryVariables(c);return{pathString:b,queryString:c,path:a,query:g}};d.makeRequest=function(a){var b=d.parseFragment(a),c={path:b.pathString,query:b.queryString,getPath:function(a){return"undefined"===typeof a?b.path:b.path[a]},getQuery:function(a,e){var c;"undefined"===typeof a?c=b.query:(c=b.query[a])&&"undefined"!==
typeof e&&(c=c[e]);return c},getQueryLast:function(a,e){var b=c.getQuery(a);return b?b[b.length-1]:e}};return c};d.makeLink=function(a,b,c){a=jQuery.isArray(a)?a.join("/"):a;b=jQuery.param(b||{});c=c||"";return a+(0<b.length?"?"+b:"")+(0<c.length?"#"+c:"")};d.setPath=function(a,b,c){if("object"===typeof a&&null!==a)for(var d=0,g=b.length;d<g;){var h=b[d++];if(d==g)a[h]=c;else{var p=h in a;if(!p||p&&"object"!==typeof a[h]||p&&null===a[h])a[h]={};a=a[h]}}};d.getPath=function(a,b,c){for(var d=0,g=b.length,
h=!0;h&&d<g&&"object"===typeof a&&null!==a;){var p=b[d++];(h=p in a)&&(a=a[p])}return h?a:c};d.deletePath=function(a,b){if("object"===typeof a&&null!==a)for(var c=0,d=b.length;c<d;){var g=b[c++];if(c==d)delete a[g];else{if(!(g in a)||"object"!==typeof a[g]||null===a[g])break;a=a[g]}}};d.isEmpty=function(a){for(var b in a)if(a.hasOwnProperty(b))return!1;return!0};d.format=function(a){var b=/%./g,c,d,g=0,h=[];for(d=0;c=b.exec(a);)switch(d=a.substring(d,b.lastIndex-2),0<d.length&&h.push(d),d=b.lastIndex,
c=c[0][1],c){case "s":case "o":g<arguments.length?h.push(arguments[g++ +1]):h.push("<?>");break;case "%":h.push("%");break;default:h.push("<%"+c+"?>")}h.push(a.substring(d));return h.join("")};d.formatNumber=function(a,b,c,d){var g=isNaN(b=Math.abs(b))?2:b;b=void 0===c?",":c;d=void 0===d?".":d;c=0>a?"-":"";var h=parseInt(a=Math.abs(+a||0).toFixed(g),10)+"",p=3<h.length?h.length%3:0;return c+(p?h.substr(0,p)+d:"")+h.substr(p).replace(/(\d{3})(?=\d)/g,"$1"+d)+(g?b+Math.abs(a-h).toFixed(g).slice(2):
"")};d.formatSize=function(a){return a=1073741824<=a?d.formatNumber(a/1073741824,2,".","")+" GiB":1048576<=a?d.formatNumber(a/1048576,2,".","")+" MiB":1024<=a?d.formatNumber(a/1024,0)+" KiB":d.formatNumber(a,0)+" bytes"};d.bytesFromIP=function(a){return-1!==a.indexOf(".")?d.bytesFromIPv4(a):-1!==a.indexOf(":")?d.bytesFromIPv6(a):null};d.bytesFromIPv4=function(a){a=a.split(".");if(4!==a.length)return null;for(var b=d.createBuffer(),c=0;c<a.length;++c){var g=parseInt(a[c],10);if(isNaN(g))return null;
b.putByte(g)}return b.getBytes()};d.bytesFromIPv6=function(a){var b=0;a=a.split(":").filter(function(a){0===a.length&&++b;return!0});for(var c=2*(8-a.length+b),g=d.createBuffer(),n=0;8>n;++n)if(a[n]&&0!==a[n].length){var h=d.hexToBytes(a[n]);2>h.length&&g.putByte(0);g.putBytes(h)}else g.fillWithByte(0,c),c=0;return g.getBytes()};d.bytesToIP=function(a){return 4===a.length?d.bytesToIPv4(a):16===a.length?d.bytesToIPv6(a):null};d.bytesToIPv4=function(a){if(4!==a.length)return null;for(var b=[],c=0;c<
a.length;++c)b.push(a.charCodeAt(c));return b.join(".")};d.bytesToIPv6=function(a){if(16!==a.length)return null;for(var b=[],c=[],g=0,n=0;n<a.length;n+=2){for(var h=d.bytesToHex(a[n]+a[n+1]);"0"===h[0]&&"0"!==h;)h=h.substr(1);if("0"===h){var p=c[c.length-1],l=b.length;p&&l===p.end+1?(p.end=l,p.end-p.start>c[g].end-c[g].start&&(g=c.length-1)):c.push({start:l,end:l})}b.push(h)}0<c.length&&(a=c[g],0<a.end-a.start&&(b.splice(a.start,a.end-a.start+1,""),0===a.start&&b.unshift(""),7===a.end&&b.push("")));
return b.join(":")};d.estimateCores=function(a,b){function c(a,e,p){if(0===e){var l=Math.floor(a.reduce(function(a,b){return a+b},0)/a.length);d.cores=Math.max(1,l);URL.revokeObjectURL(h);return b(null,d.cores)}g(p,function(b,d){a.push(n(p,d));c(a,e-1,p)})}function g(a,b){for(var e=[],c=[],d=0;d<a;++d){var n=new Worker(h);n.addEventListener("message",function(d){c.push(d.data);if(c.length===a){for(d=0;d<a;++d)e[d].terminate();b(null,c)}});e.push(n)}for(d=0;d<a;++d)e[d].postMessage(d)}function n(a,
b){for(var e=[],c=0;c<a;++c)for(var d=b[c],g=e[c]=[],D=0;D<a;++D)if(c!==D){var n=b[D];(d.st>n.st&&d.st<n.et||n.st>d.st&&n.st<d.et)&&g.push(D)}return e.reduce(function(a,b){return Math.max(a,b.length)},0)}"function"===typeof a&&(b=a,a={});a=a||{};if("cores"in d&&!a.update)return b(null,d.cores);if("undefined"!==typeof navigator&&"hardwareConcurrency"in navigator&&0<navigator.hardwareConcurrency)return d.cores=navigator.hardwareConcurrency,b(null,d.cores);if("undefined"===typeof Worker)return d.cores=
1,b(null,d.cores);if("undefined"===typeof Blob)return d.cores=2,b(null,d.cores);var h=URL.createObjectURL(new Blob(["(",function(){self.addEventListener("message",function(a){a=Date.now();for(var b=a+4;Date.now()<b;);self.postMessage({st:a,et:b})})}.toString(),")()"],{type:"application/javascript"}));c([],5,16)}}if("function"!==typeof define)if("object"===typeof module&&module.exports){var q=!0;define=function(c,f){f(require,module)}}else return"undefined"===typeof forge&&(forge={}),k(forge);var m,
r=function(c,f){f.exports=function(d){var f=m.map(function(b){return c(b)}).concat(k);d=d||{};d.defined=d.defined||{};if(d.defined.util)return d.util;d.defined.util=!0;for(var b=0;b<f.length;++b)f[b](d);return d.util}},u=define;define=function(c,f){m="string"===typeof c?f.slice(2):c.slice(2);if(q)return delete define,u.apply(null,Array.prototype.slice.call(arguments,0));define=u;return define.apply(null,Array.prototype.slice.call(arguments,0))};define(["require","module"],function(){r.apply(null,
Array.prototype.slice.call(arguments,0))})})();(function(){function k(c){c.pki=c.pki||{};c=c.pki.oids=c.oids=c.oids||{};c["1.2.840.113549.1.1.1"]="rsaEncryption";c.rsaEncryption="1.2.840.113549.1.1.1";c["1.2.840.113549.1.1.4"]="md5WithRSAEncryption";c.md5WithRSAEncryption="1.2.840.113549.1.1.4";c["1.2.840.113549.1.1.5"]="sha1WithRSAEncryption";c.sha1WithRSAEncryption="1.2.840.113549.1.1.5";c["1.2.840.113549.1.1.7"]="RSAES-OAEP";c["RSAES-OAEP"]="1.2.840.113549.1.1.7";c["1.2.840.113549.1.1.8"]="mgf1";c.mgf1="1.2.840.113549.1.1.8";c["1.2.840.113549.1.1.9"]=
"pSpecified";c.pSpecified="1.2.840.113549.1.1.9";c["1.2.840.113549.1.1.10"]="RSASSA-PSS";c["RSASSA-PSS"]="1.2.840.113549.1.1.10";c["1.2.840.113549.1.1.11"]="sha256WithRSAEncryption";c.sha256WithRSAEncryption="1.2.840.113549.1.1.11";c["1.2.840.113549.1.1.12"]="sha384WithRSAEncryption";c.sha384WithRSAEncryption="1.2.840.113549.1.1.12";c["1.2.840.113549.1.1.13"]="sha512WithRSAEncryption";c.sha512WithRSAEncryption="1.2.840.113549.1.1.13";c["1.3.14.3.2.7"]="desCBC";c.desCBC="1.3.14.3.2.7";c["1.3.14.3.2.26"]=
"sha1";c.sha1="1.3.14.3.2.26";c["2.16.840.1.101.3.4.2.1"]="sha256";c.sha256="2.16.840.1.101.3.4.2.1";c["2.16.840.1.101.3.4.2.2"]="sha384";c.sha384="2.16.840.1.101.3.4.2.2";c["2.16.840.1.101.3.4.2.3"]="sha512";c.sha512="2.16.840.1.101.3.4.2.3";c["1.2.840.113549.2.5"]="md5";c.md5="1.2.840.113549.2.5";c["1.2.840.113549.1.7.1"]="data";c.data="1.2.840.113549.1.7.1";c["1.2.840.113549.1.7.2"]="signedData";c.signedData="1.2.840.113549.1.7.2";c["1.2.840.113549.1.7.3"]="envelopedData";c.envelopedData="1.2.840.113549.1.7.3";
c["1.2.840.113549.1.7.4"]="signedAndEnvelopedData";c.signedAndEnvelopedData="1.2.840.113549.1.7.4";c["1.2.840.113549.1.7.5"]="digestedData";c.digestedData="1.2.840.113549.1.7.5";c["1.2.840.113549.1.7.6"]="encryptedData";c.encryptedData="1.2.840.113549.1.7.6";c["1.2.840.113549.1.9.1"]="emailAddress";c.emailAddress="1.2.840.113549.1.9.1";c["1.2.840.113549.1.9.2"]="unstructuredName";c.unstructuredName="1.2.840.113549.1.9.2";c["1.2.840.113549.1.9.3"]="contentType";c.contentType="1.2.840.113549.1.9.3";
c["1.2.840.113549.1.9.4"]="messageDigest";c.messageDigest="1.2.840.113549.1.9.4";c["1.2.840.113549.1.9.5"]="signingTime";c.signingTime="1.2.840.113549.1.9.5";c["1.2.840.113549.1.9.6"]="counterSignature";c.counterSignature="1.2.840.113549.1.9.6";c["1.2.840.113549.1.9.7"]="challengePassword";c.challengePassword="1.2.840.113549.1.9.7";c["1.2.840.113549.1.9.8"]="unstructuredAddress";c.unstructuredAddress="1.2.840.113549.1.9.8";c["1.2.840.113549.1.9.14"]="extensionRequest";c.extensionRequest="1.2.840.113549.1.9.14";
c["1.2.840.113549.1.9.20"]="friendlyName";c.friendlyName="1.2.840.113549.1.9.20";c["1.2.840.113549.1.9.21"]="localKeyId";c.localKeyId="1.2.840.113549.1.9.21";c["1.2.840.113549.1.9.22.1"]="x509Certificate";c.x509Certificate="1.2.840.113549.1.9.22.1";c["1.2.840.113549.1.12.10.1.1"]="keyBag";c.keyBag="1.2.840.113549.1.12.10.1.1";c["1.2.840.113549.1.12.10.1.2"]="pkcs8ShroudedKeyBag";c.pkcs8ShroudedKeyBag="1.2.840.113549.1.12.10.1.2";c["1.2.840.113549.1.12.10.1.3"]="certBag";c.certBag="1.2.840.113549.1.12.10.1.3";
c["1.2.840.113549.1.12.10.1.4"]="crlBag";c.crlBag="1.2.840.113549.1.12.10.1.4";c["1.2.840.113549.1.12.10.1.5"]="secretBag";c.secretBag="1.2.840.113549.1.12.10.1.5";c["1.2.840.113549.1.12.10.1.6"]="safeContentsBag";c.safeContentsBag="1.2.840.113549.1.12.10.1.6";c["1.2.840.113549.1.5.13"]="pkcs5PBES2";c.pkcs5PBES2="1.2.840.113549.1.5.13";c["1.2.840.113549.1.5.12"]="pkcs5PBKDF2";c.pkcs5PBKDF2="1.2.840.113549.1.5.12";c["1.2.840.113549.1.12.1.1"]="pbeWithSHAAnd128BitRC4";c.pbeWithSHAAnd128BitRC4="1.2.840.113549.1.12.1.1";
c["1.2.840.113549.1.12.1.2"]="pbeWithSHAAnd40BitRC4";c.pbeWithSHAAnd40BitRC4="1.2.840.113549.1.12.1.2";c["1.2.840.113549.1.12.1.3"]="pbeWithSHAAnd3-KeyTripleDES-CBC";c["pbeWithSHAAnd3-KeyTripleDES-CBC"]="1.2.840.113549.1.12.1.3";c["1.2.840.113549.1.12.1.4"]="pbeWithSHAAnd2-KeyTripleDES-CBC";c["pbeWithSHAAnd2-KeyTripleDES-CBC"]="1.2.840.113549.1.12.1.4";c["1.2.840.113549.1.12.1.5"]="pbeWithSHAAnd128BitRC2-CBC";c["pbeWithSHAAnd128BitRC2-CBC"]="1.2.840.113549.1.12.1.5";c["1.2.840.113549.1.12.1.6"]="pbewithSHAAnd40BitRC2-CBC";
c["pbewithSHAAnd40BitRC2-CBC"]="1.2.840.113549.1.12.1.6";c["1.2.840.113549.3.7"]="des-EDE3-CBC";c["des-EDE3-CBC"]="1.2.840.113549.3.7";c["2.16.840.1.101.3.4.1.2"]="aes128-CBC";c["aes128-CBC"]="2.16.840.1.101.3.4.1.2";c["2.16.840.1.101.3.4.1.22"]="aes192-CBC";c["aes192-CBC"]="2.16.840.1.101.3.4.1.22";c["2.16.840.1.101.3.4.1.42"]="aes256-CBC";c["aes256-CBC"]="2.16.840.1.101.3.4.1.42";c["2.5.4.3"]="commonName";c.commonName="2.5.4.3";c["2.5.4.5"]="serialName";c.serialName="2.5.4.5";c["2.5.4.6"]="countryName";
c.countryName="2.5.4.6";c["2.5.4.7"]="localityName";c.localityName="2.5.4.7";c["2.5.4.8"]="stateOrProvinceName";c.stateOrProvinceName="2.5.4.8";c["2.5.4.10"]="organizationName";c.organizationName="2.5.4.10";c["2.5.4.11"]="organizationalUnitName";c.organizationalUnitName="2.5.4.11";c["2.16.840.1.113730.1.1"]="nsCertType";c.nsCertType="2.16.840.1.113730.1.1";c["2.5.29.1"]="authorityKeyIdentifier";c["2.5.29.2"]="keyAttributes";c["2.5.29.3"]="certificatePolicies";c["2.5.29.4"]="keyUsageRestriction";c["2.5.29.5"]=
"policyMapping";c["2.5.29.6"]="subtreesConstraint";c["2.5.29.7"]="subjectAltName";c["2.5.29.8"]="issuerAltName";c["2.5.29.9"]="subjectDirectoryAttributes";c["2.5.29.10"]="basicConstraints";c["2.5.29.11"]="nameConstraints";c["2.5.29.12"]="policyConstraints";c["2.5.29.13"]="basicConstraints";c["2.5.29.14"]="subjectKeyIdentifier";c.subjectKeyIdentifier="2.5.29.14";c["2.5.29.15"]="keyUsage";c.keyUsage="2.5.29.15";c["2.5.29.16"]="privateKeyUsagePeriod";c["2.5.29.17"]="subjectAltName";c.subjectAltName=
"2.5.29.17";c["2.5.29.18"]="issuerAltName";c.issuerAltName="2.5.29.18";c["2.5.29.19"]="basicConstraints";c.basicConstraints="2.5.29.19";c["2.5.29.20"]="cRLNumber";c["2.5.29.21"]="cRLReason";c["2.5.29.22"]="expirationDate";c["2.5.29.23"]="instructionCode";c["2.5.29.24"]="invalidityDate";c["2.5.29.25"]="cRLDistributionPoints";c["2.5.29.26"]="issuingDistributionPoint";c["2.5.29.27"]="deltaCRLIndicator";c["2.5.29.28"]="issuingDistributionPoint";c["2.5.29.29"]="certificateIssuer";c["2.5.29.30"]="nameConstraints";
c["2.5.29.31"]="cRLDistributionPoints";c["2.5.29.32"]="certificatePolicies";c["2.5.29.33"]="policyMappings";c["2.5.29.34"]="policyConstraints";c["2.5.29.35"]="authorityKeyIdentifier";c["2.5.29.36"]="policyConstraints";c["2.5.29.37"]="extKeyUsage";c.extKeyUsage="2.5.29.37";c["2.5.29.46"]="freshestCRL";c["2.5.29.54"]="inhibitAnyPolicy";c["1.3.6.1.5.5.7.3.1"]="serverAuth";c.serverAuth="1.3.6.1.5.5.7.3.1";c["1.3.6.1.5.5.7.3.2"]="clientAuth";c.clientAuth="1.3.6.1.5.5.7.3.2";c["1.3.6.1.5.5.7.3.3"]="codeSigning";
c.codeSigning="1.3.6.1.5.5.7.3.3";c["1.3.6.1.5.5.7.3.4"]="emailProtection";c.emailProtection="1.3.6.1.5.5.7.3.4";c["1.3.6.1.5.5.7.3.8"]="timeStamping";c.timeStamping="1.3.6.1.5.5.7.3.8"}if("function"!==typeof define)if("object"===typeof module&&module.exports){var q=!0;define=function(c,f){f(require,module)}}else return"undefined"===typeof forge&&(forge={}),k(forge);var m,r=function(c,f){f.exports=function(d){var f=m.map(function(b){return c(b)}).concat(k);d=d||{};d.defined=d.defined||{};if(d.defined.oids)return d.oids;
d.defined.oids=!0;for(var b=0;b<f.length;++b)f[b](d);return d.oids}},u=define;define=function(c,f){m="string"===typeof c?f.slice(2):c.slice(2);if(q)return delete define,u.apply(null,Array.prototype.slice.call(arguments,0));define=u;return define.apply(null,Array.prototype.slice.call(arguments,0))};define(["require","module"],function(){r.apply(null,Array.prototype.slice.call(arguments,0))})})();(function(){function k(c){var f=c.asn1=c.asn1||{};f.Class={UNIVERSAL:0,APPLICATION:64,CONTEXT_SPECIFIC:128,PRIVATE:192};f.Type={NONE:0,BOOLEAN:1,INTEGER:2,BITSTRING:3,OCTETSTRING:4,NULL:5,OID:6,ODESC:7,EXTERNAL:8,REAL:9,ENUMERATED:10,EMBEDDED:11,UTF8:12,ROID:13,SEQUENCE:16,SET:17,PRINTABLESTRING:19,IA5STRING:22,UTCTIME:23,GENERALIZEDTIME:24,BMPSTRING:30};f.create=function(b,d,l,a){if(c.util.isArray(a)){for(var g=[],h=0;h<a.length;++h)void 0!==a[h]&&g.push(a[h]);a=g}return{tagClass:b,type:d,constructed:l,
composed:l||c.util.isArray(a),value:a}};var d=f.getBerValueLength=function(b){var c=b.getByte();if(128!==c)return c&128?b.getInt((c&127)<<3):c};f.fromDer=function(b,s){void 0===s&&(s=!0);"string"===typeof b&&(b=c.util.createBuffer(b));if(2>b.length()){var l=Error("Too few bytes to parse DER.");l.bytes=b.length();throw l;}var a=b.getByte(),l=a&192,g=a&31,h=d(b);if(b.length()<h){if(s)throw l=Error("Too few bytes to read ASN.1 value."),l.detail=b.length()+" < "+h,l;h=b.length()}var p,t=32===(a&32);p=
t;if(!p&&l===f.Class.UNIVERSAL&&g===f.Type.BITSTRING&&1<h){var e=b.read;if(0===b.getByte()&&(a=b.getByte(),a&=192,a===f.Class.UNIVERSAL||a===f.Class.CONTEXT_SPECIFIC))try{if(p=d(b)===h-(b.read-e))++e,--h}catch(x){}b.read=e}if(p)if(p=[],void 0===h)for(;;){if(b.bytes(2)===String.fromCharCode(0,0)){b.getBytes(2);break}p.push(f.fromDer(b,s))}else for(e=b.length();0<h;)p.push(f.fromDer(b,s)),h-=e-b.length(),e=b.length();else{if(void 0===h){if(s)throw Error("Non-constructed ASN.1 object of indefinite length.");
h=b.length()}if(g===f.Type.BMPSTRING)for(p="",e=0;e<h;e+=2)p+=String.fromCharCode(b.getInt16());else p=b.getBytes(h)}return f.create(l,g,t,p)};f.toDer=function(b){var d=c.util.createBuffer(),l=b.tagClass|b.type,a=c.util.createBuffer();if(b.composed){b.constructed?l|=32:a.putByte(0);for(var g=0;g<b.value.length;++g)void 0!==b.value[g]&&a.putBuffer(f.toDer(b.value[g]))}else if(b.type===f.Type.BMPSTRING)for(g=0;g<b.value.length;++g)a.putInt16(b.value.charCodeAt(g));else a.putBytes(b.value);d.putByte(l);
if(127>=a.length())d.putByte(a.length()&127);else{g=a.length();b="";do b+=String.fromCharCode(g&255),g>>>=8;while(0<g);d.putByte(b.length|128);for(g=b.length-1;0<=g;--g)d.putByte(b.charCodeAt(g))}d.putBuffer(a);return d};f.oidToDer=function(b){b=b.split(".");var d=c.util.createBuffer();d.putByte(40*parseInt(b[0],10)+parseInt(b[1],10));for(var l,a,g,h,p=2;p<b.length;++p){l=!0;a=[];g=parseInt(b[p],10);do h=g&127,g>>>=7,l||(h|=128),a.push(h),l=!1;while(0<g);for(l=a.length-1;0<=l;--l)d.putByte(a[l])}return d};
f.derToOid=function(b){var d;"string"===typeof b&&(b=c.util.createBuffer(b));var l=b.getByte();d=Math.floor(l/40)+"."+l%40;for(var a=0;0<b.length();)l=b.getByte(),a<<=7,l&128?a+=l&127:(d+="."+(a+l),a=0);return d};f.utcTimeToDate=function(b){var c=new Date,d=parseInt(b.substr(0,2),10),d=50<=d?1900+d:2E3+d,a=parseInt(b.substr(2,2),10)-1,g=parseInt(b.substr(4,2),10),h=parseInt(b.substr(6,2),10),p=parseInt(b.substr(8,2),10),f=0;if(11<b.length){var e=b.charAt(10),x=10;"+"!==e&&"-"!==e&&(f=parseInt(b.substr(10,
2),10),x+=2)}c.setUTCFullYear(d,a,g);c.setUTCHours(h,p,f,0);x&&(e=b.charAt(x),"+"===e||"-"===e)&&(d=parseInt(b.substr(x+1,2),10),b=parseInt(b.substr(x+4,2),10),b=6E4*(60*d+b),"+"===e?c.setTime(+c-b):c.setTime(+c+b));return c};f.generalizedTimeToDate=function(b){var c=new Date,d=parseInt(b.substr(0,4),10),a=parseInt(b.substr(4,2),10)-1,g=parseInt(b.substr(6,2),10),h=parseInt(b.substr(8,2),10),p=parseInt(b.substr(10,2),10),f=parseInt(b.substr(12,2),10),e=0,x=0,k=!1;"Z"===b.charAt(b.length-1)&&(k=!0);
var v=b.length-5,n=b.charAt(v);if("+"===n||"-"===n)x=parseInt(b.substr(v+1,2),10),v=parseInt(b.substr(v+4,2),10),x=6E4*(60*x+v),"+"===n&&(x*=-1),k=!0;"."===b.charAt(14)&&(e=1E3*parseFloat(b.substr(14),10));k?(c.setUTCFullYear(d,a,g),c.setUTCHours(h,p,f,e),c.setTime(+c+x)):(c.setFullYear(d,a,g),c.setHours(h,p,f,e));return c};f.dateToUtcTime=function(b){if("string"===typeof b)return b;var c="",d=[];d.push((""+b.getUTCFullYear()).substr(2));d.push(""+(b.getUTCMonth()+1));d.push(""+b.getUTCDate());d.push(""+
b.getUTCHours());d.push(""+b.getUTCMinutes());d.push(""+b.getUTCSeconds());for(b=0;b<d.length;++b)2>d[b].length&&(c+="0"),c+=d[b];return c+"Z"};f.dateToGeneralizedTime=function(b){if("string"===typeof b)return b;var c="",d=[];d.push(""+b.getUTCFullYear());d.push(""+(b.getUTCMonth()+1));d.push(""+b.getUTCDate());d.push(""+b.getUTCHours());d.push(""+b.getUTCMinutes());d.push(""+b.getUTCSeconds());for(b=0;b<d.length;++b)2>d[b].length&&(c+="0"),c+=d[b];return c+"Z"};f.integerToDer=function(b){var d=c.util.createBuffer();
if(-128<=b&&128>b)return d.putSignedInt(b,8);if(-32768<=b&&32768>b)return d.putSignedInt(b,16);if(-8388608<=b&&8388608>b)return d.putSignedInt(b,24);if(-2147483648<=b&&2147483648>b)return d.putSignedInt(b,32);d=Error("Integer too large; max is 32-bits.");d.integer=b;throw d;};f.derToInteger=function(b){"string"===typeof b&&(b=c.util.createBuffer(b));var d=8*b.length();if(32<d)throw Error("Integer too large; max is 32-bits.");return b.getSignedInt(d)};f.validate=function(b,d,l,a){var g=!1;if(b.tagClass!==
d.tagClass&&"undefined"!==typeof d.tagClass||b.type!==d.type&&"undefined"!==typeof d.type)a&&(b.tagClass!==d.tagClass&&a.push("["+d.name+'] Expected tag class "'+d.tagClass+'", got "'+b.tagClass+'"'),b.type!==d.type&&a.push("["+d.name+'] Expected type "'+d.type+'", got "'+b.type+'"'));else if(b.constructed===d.constructed||"undefined"===typeof d.constructed){g=!0;if(d.value&&c.util.isArray(d.value))for(var h=0,p=0;g&&p<d.value.length;++p)g=d.value[p].optional||!1,b.value[h]&&((g=f.validate(b.value[h],
d.value[p],l,a))?++h:d.value[p].optional&&(g=!0)),!g&&a&&a.push("["+d.name+'] Tag class "'+d.tagClass+'", type "'+d.type+'" expected value length "'+d.value.length+'", got "'+b.value.length+'"');g&&l&&(d.capture&&(l[d.capture]=b.value),d.captureAsn1&&(l[d.captureAsn1]=b))}else a&&a.push("["+d.name+'] Expected constructed "'+d.constructed+'", got "'+b.constructed+'"');return g};var k=/[^\\u0000-\\u00ff]/;f.prettyPrint=function(b,d,l){var a="";d=d||0;l=l||2;0<d&&(a+="\n");for(var g="",h=0;h<d*l;++h)g+=
" ";a+=g+"Tag: ";switch(b.tagClass){case f.Class.UNIVERSAL:a+="Universal:";break;case f.Class.APPLICATION:a+="Application:";break;case f.Class.CONTEXT_SPECIFIC:a+="Context-Specific:";break;case f.Class.PRIVATE:a+="Private:"}if(b.tagClass===f.Class.UNIVERSAL)switch(a+=b.type,b.type){case f.Type.NONE:a+=" (None)";break;case f.Type.BOOLEAN:a+=" (Boolean)";break;case f.Type.BITSTRING:a+=" (Bit string)";break;case f.Type.INTEGER:a+=" (Integer)";break;case f.Type.OCTETSTRING:a+=" (Octet string)";break;
case f.Type.NULL:a+=" (Null)";break;case f.Type.OID:a+=" (Object Identifier)";break;case f.Type.ODESC:a+=" (Object Descriptor)";break;case f.Type.EXTERNAL:a+=" (External or Instance of)";break;case f.Type.REAL:a+=" (Real)";break;case f.Type.ENUMERATED:a+=" (Enumerated)";break;case f.Type.EMBEDDED:a+=" (Embedded PDV)";break;case f.Type.UTF8:a+=" (UTF8)";break;case f.Type.ROID:a+=" (Relative Object Identifier)";break;case f.Type.SEQUENCE:a+=" (Sequence)";break;case f.Type.SET:a+=" (Set)";break;case f.Type.PRINTABLESTRING:a+=
" (Printable String)";break;case f.Type.IA5String:a+=" (IA5String (ASCII))";break;case f.Type.UTCTIME:a+=" (UTC time)";break;case f.Type.GENERALIZEDTIME:a+=" (Generalized time)";break;case f.Type.BMPSTRING:a+=" (BMP String)"}else a+=b.type;a=a+"\n"+(g+"Constructed: "+b.constructed+"\n");if(b.composed){for(var p=0,t="",h=0;h<b.value.length;++h)void 0!==b.value[h]&&(p+=1,t+=f.prettyPrint(b.value[h],d+1,l),h+1<b.value.length&&(t+=","));a+=g+"Sub values: "+p+t}else if(a+=g+"Value: ",b.type===f.Type.OID&&
(d=f.derToOid(b.value),a+=d,c.pki&&c.pki.oids&&d in c.pki.oids&&(a+=" ("+c.pki.oids[d]+") ")),b.type===f.Type.INTEGER)try{a+=f.derToInteger(b.value)}catch(e){a+="0x"+c.util.bytesToHex(b.value)}else b.type===f.Type.OCTETSTRING?(k.test(b.value)||(a+="("+b.value+") "),a+="0x"+c.util.bytesToHex(b.value)):a=b.type===f.Type.UTF8?a+c.util.decodeUtf8(b.value):b.type===f.Type.PRINTABLESTRING||b.type===f.Type.IA5String?a+b.value:k.test(b.value)?a+("0x"+c.util.bytesToHex(b.value)):0===b.value.length?a+"[null]":
a+b.value;return a}}if("function"!==typeof define)if("object"===typeof module&&module.exports){var q=!0;define=function(c,f){f(require,module)}}else return"undefined"===typeof forge&&(forge={}),k(forge);var m,r=function(c,f){f.exports=function(d){var f=m.map(function(b){return c(b)}).concat(k);d=d||{};d.defined=d.defined||{};if(d.defined.asn1)return d.asn1;d.defined.asn1=!0;for(var b=0;b<f.length;++b)f[b](d);return d.asn1}},u=define;define=function(c,f){m="string"===typeof c?f.slice(2):c.slice(2);
if(q)return delete define,u.apply(null,Array.prototype.slice.call(arguments,0));define=u;return define.apply(null,Array.prototype.slice.call(arguments,0))};define(["require","module","./util","./oids"],function(){r.apply(null,Array.prototype.slice.call(arguments,0))})})();(function(){function k(c){function f(a,b,c){this.data=[];null!=a&&("number"==typeof a?this.fromNumber(a,b,c):null==b&&"string"!=typeof a?this.fromString(a,256):this.fromString(a,b))}function d(){return new f(null)}function k(a,b,c,d,e,g){for(;0<=--g;){var n=b*this.data[a++]+c.data[d]+e;e=Math.floor(n/67108864);c.data[d++]=n&67108863}return e}function b(a,b,c,d,e,g){var n=b&32767;for(b>>=15;0<=--g;){var h=this.data[a]&32767,p=this.data[a++]>>15,f=b*h+p*n,h=n*h+((f&32767)<<15)+c.data[d]+(e&1073741823);
e=(h>>>30)+(f>>>15)+b*p+(e>>>30);c.data[d++]=h&1073741823}return e}function s(a,b,c,d,e,g){var n=b&16383;for(b>>=14;0<=--g;){var h=this.data[a]&16383,p=this.data[a++]>>14,f=b*h+p*n,h=n*h+((f&16383)<<14)+c.data[d]+e;e=(h>>28)+(f>>14)+b*p;c.data[d++]=h&268435455}return e}function l(a,b){var c=E[a.charCodeAt(b)];return null==c?-1:c}function a(a){var b=d();b.fromInt(a);return b}function g(a){var b=1,c;0!=(c=a>>>16)&&(a=c,b+=16);0!=(c=a>>8)&&(a=c,b+=8);0!=(c=a>>4)&&(a=c,b+=4);0!=(c=a>>2)&&(a=c,b+=2);0!=
a>>1&&(b+=1);return b}function h(a){this.m=a}function p(a){this.m=a;this.mp=a.invDigit();this.mpl=this.mp&32767;this.mph=this.mp>>15;this.um=(1<<a.DB-15)-1;this.mt2=2*a.t}function t(a,b){return a&b}function e(a,b){return a|b}function x(a,b){return a^b}function A(a,b){return a&~b}function m(){}function n(a){return a}function z(a){this.r2=d();this.q3=d();f.ONE.dlShiftTo(2*a.t,this.r2);this.mu=this.r2.divide(a);this.m=a}function w(){return{nextBytes:function(a){for(var b=0;b<a.length;++b)a[b]=Math.floor(256*
Math.random())}}}var y;"undefined"===typeof navigator?(f.prototype.am=s,y=28):"Microsoft Internet Explorer"==navigator.appName?(f.prototype.am=b,y=30):"Netscape"!=navigator.appName?(f.prototype.am=k,y=26):(f.prototype.am=s,y=28);f.prototype.DB=y;f.prototype.DM=(1<<y)-1;f.prototype.DV=1<<y;f.prototype.FV=Math.pow(2,52);f.prototype.F1=52-y;f.prototype.F2=2*y-52;var E=[],q;y=48;for(q=0;9>=q;++q)E[y++]=q;y=97;for(q=10;36>q;++q)E[y++]=q;y=65;for(q=10;36>q;++q)E[y++]=q;h.prototype.convert=function(a){return 0>
a.s||0<=a.compareTo(this.m)?a.mod(this.m):a};h.prototype.revert=function(a){return a};h.prototype.reduce=function(a){a.divRemTo(this.m,null,a)};h.prototype.mulTo=function(a,b,c){a.multiplyTo(b,c);this.reduce(c)};h.prototype.sqrTo=function(a,b){a.squareTo(b);this.reduce(b)};p.prototype.convert=function(a){var b=d();a.abs().dlShiftTo(this.m.t,b);b.divRemTo(this.m,null,b);0>a.s&&0<b.compareTo(f.ZERO)&&this.m.subTo(b,b);return b};p.prototype.revert=function(a){var b=d();a.copyTo(b);this.reduce(b);return b};
p.prototype.reduce=function(a){for(;a.t<=this.mt2;)a.data[a.t++]=0;for(var b=0;b<this.m.t;++b){var c=a.data[b]&32767,d=c*this.mpl+((c*this.mph+(a.data[b]>>15)*this.mpl&this.um)<<15)&a.DM,c=b+this.m.t;for(a.data[c]+=this.m.am(0,d,a,b,0,this.m.t);a.data[c]>=a.DV;)a.data[c]-=a.DV,a.data[++c]++}a.clamp();a.drShiftTo(this.m.t,a);0<=a.compareTo(this.m)&&a.subTo(this.m,a)};p.prototype.mulTo=function(a,b,c){a.multiplyTo(b,c);this.reduce(c)};p.prototype.sqrTo=function(a,b){a.squareTo(b);this.reduce(b)};f.prototype.copyTo=
function(a){for(var b=this.t-1;0<=b;--b)a.data[b]=this.data[b];a.t=this.t;a.s=this.s};f.prototype.fromInt=function(a){this.t=1;this.s=0>a?-1:0;0<a?this.data[0]=a:-1>a?this.data[0]=a+this.DV:this.t=0};f.prototype.fromString=function(a,b){var c;if(16==b)c=4;else if(8==b)c=3;else if(256==b)c=8;else if(2==b)c=1;else if(32==b)c=5;else if(4==b)c=2;else{this.fromRadix(a,b);return}this.s=this.t=0;for(var d=a.length,e=!1,g=0;0<=--d;){var n=8==c?a[d]&255:l(a,d);0>n?"-"==a.charAt(d)&&(e=!0):(e=!1,0==g?this.data[this.t++]=
n:g+c>this.DB?(this.data[this.t-1]|=(n&(1<<this.DB-g)-1)<<g,this.data[this.t++]=n>>this.DB-g):this.data[this.t-1]|=n<<g,g+=c,g>=this.DB&&(g-=this.DB))}8==c&&0!=(a[0]&128)&&(this.s=-1,0<g&&(this.data[this.t-1]|=(1<<this.DB-g)-1<<g));this.clamp();e&&f.ZERO.subTo(this,this)};f.prototype.clamp=function(){for(var a=this.s&this.DM;0<this.t&&this.data[this.t-1]==a;)--this.t};f.prototype.dlShiftTo=function(a,b){var c;for(c=this.t-1;0<=c;--c)b.data[c+a]=this.data[c];for(c=a-1;0<=c;--c)b.data[c]=0;b.t=this.t+
a;b.s=this.s};f.prototype.drShiftTo=function(a,b){for(var c=a;c<this.t;++c)b.data[c-a]=this.data[c];b.t=Math.max(this.t-a,0);b.s=this.s};f.prototype.lShiftTo=function(a,b){var c=a%this.DB,d=this.DB-c,e=(1<<d)-1,g=Math.floor(a/this.DB),n=this.s<<c&this.DM,h;for(h=this.t-1;0<=h;--h)b.data[h+g+1]=this.data[h]>>d|n,n=(this.data[h]&e)<<c;for(h=g-1;0<=h;--h)b.data[h]=0;b.data[g]=n;b.t=this.t+g+1;b.s=this.s;b.clamp()};f.prototype.rShiftTo=function(a,b){b.s=this.s;var c=Math.floor(a/this.DB);if(c>=this.t)b.t=
0;else{var d=a%this.DB,e=this.DB-d,g=(1<<d)-1;b.data[0]=this.data[c]>>d;for(var n=c+1;n<this.t;++n)b.data[n-c-1]|=(this.data[n]&g)<<e,b.data[n-c]=this.data[n]>>d;0<d&&(b.data[this.t-c-1]|=(this.s&g)<<e);b.t=this.t-c;b.clamp()}};f.prototype.subTo=function(a,b){for(var c=0,d=0,e=Math.min(a.t,this.t);c<e;)d+=this.data[c]-a.data[c],b.data[c++]=d&this.DM,d>>=this.DB;if(a.t<this.t){for(d-=a.s;c<this.t;)d+=this.data[c],b.data[c++]=d&this.DM,d>>=this.DB;d+=this.s}else{for(d+=this.s;c<a.t;)d-=a.data[c],b.data[c++]=
d&this.DM,d>>=this.DB;d-=a.s}b.s=0>d?-1:0;-1>d?b.data[c++]=this.DV+d:0<d&&(b.data[c++]=d);b.t=c;b.clamp()};f.prototype.multiplyTo=function(a,b){var c=this.abs(),d=a.abs(),e=c.t;for(b.t=e+d.t;0<=--e;)b.data[e]=0;for(e=0;e<d.t;++e)b.data[e+c.t]=c.am(0,d.data[e],b,e,0,c.t);b.s=0;b.clamp();this.s!=a.s&&f.ZERO.subTo(b,b)};f.prototype.squareTo=function(a){for(var b=this.abs(),c=a.t=2*b.t;0<=--c;)a.data[c]=0;for(c=0;c<b.t-1;++c){var d=b.am(c,b.data[c],a,2*c,0,1);(a.data[c+b.t]+=b.am(c+1,2*b.data[c],a,2*
c+1,d,b.t-c-1))>=b.DV&&(a.data[c+b.t]-=b.DV,a.data[c+b.t+1]=1)}0<a.t&&(a.data[a.t-1]+=b.am(c,b.data[c],a,2*c,0,1));a.s=0;a.clamp()};f.prototype.divRemTo=function(a,b,c){var e=a.abs();if(!(0>=e.t)){var n=this.abs();if(n.t<e.t)null!=b&&b.fromInt(0),null!=c&&this.copyTo(c);else{null==c&&(c=d());var h=d(),p=this.s;a=a.s;var l=this.DB-g(e.data[e.t-1]);0<l?(e.lShiftTo(l,h),n.lShiftTo(l,c)):(e.copyTo(h),n.copyTo(c));e=h.t;n=h.data[e-1];if(0!=n){var t=n*(1<<this.F1)+(1<e?h.data[e-2]>>this.F2:0),s=this.FV/
t,t=(1<<this.F1)/t,z=1<<this.F2,x=c.t,k=x-e,w=null==b?d():b;h.dlShiftTo(k,w);0<=c.compareTo(w)&&(c.data[c.t++]=1,c.subTo(w,c));f.ONE.dlShiftTo(e,w);for(w.subTo(h,h);h.t<e;)h.data[h.t++]=0;for(;0<=--k;){var A=c.data[--x]==n?this.DM:Math.floor(c.data[x]*s+(c.data[x-1]+z)*t);if((c.data[x]+=h.am(0,A,c,k,0,e))<A)for(h.dlShiftTo(k,w),c.subTo(w,c);c.data[x]<--A;)c.subTo(w,c)}null!=b&&(c.drShiftTo(e,b),p!=a&&f.ZERO.subTo(b,b));c.t=e;c.clamp();0<l&&c.rShiftTo(l,c);0>p&&f.ZERO.subTo(c,c)}}}};f.prototype.invDigit=
function(){if(1>this.t)return 0;var a=this.data[0];if(0==(a&1))return 0;var b=a&3,b=b*(2-(a&15)*b)&15,b=b*(2-(a&255)*b)&255,b=b*(2-((a&65535)*b&65535))&65535,b=b*(2-a*b%this.DV)%this.DV;return 0<b?this.DV-b:-b};f.prototype.isEven=function(){return 0==(0<this.t?this.data[0]&1:this.s)};f.prototype.exp=function(a,b){if(4294967295<a||1>a)return f.ONE;var c=d(),e=d(),n=b.convert(this),h=g(a)-1;for(n.copyTo(c);0<=--h;)if(b.sqrTo(c,e),0<(a&1<<h))b.mulTo(e,n,c);else var p=c,c=e,e=p;return b.revert(c)};f.prototype.toString=
function(a){if(0>this.s)return"-"+this.negate().toString(a);if(16==a)a=4;else if(8==a)a=3;else if(2==a)a=1;else if(32==a)a=5;else if(4==a)a=2;else return this.toRadix(a);var b=(1<<a)-1,c,d=!1,e="",g=this.t,n=this.DB-g*this.DB%a;if(0<g--)for(n<this.DB&&0<(c=this.data[g]>>n)&&(d=!0,e="0123456789abcdefghijklmnopqrstuvwxyz".charAt(c));0<=g;)n<a?(c=(this.data[g]&(1<<n)-1)<<a-n,c|=this.data[--g]>>(n+=this.DB-a)):(c=this.data[g]>>(n-=a)&b,0>=n&&(n+=this.DB,--g)),0<c&&(d=!0),d&&(e+="0123456789abcdefghijklmnopqrstuvwxyz".charAt(c));
return d?e:"0"};f.prototype.negate=function(){var a=d();f.ZERO.subTo(this,a);return a};f.prototype.abs=function(){return 0>this.s?this.negate():this};f.prototype.compareTo=function(a){var b=this.s-a.s;if(0!=b)return b;var c=this.t,b=c-a.t;if(0!=b)return 0>this.s?-b:b;for(;0<=--c;)if(0!=(b=this.data[c]-a.data[c]))return b;return 0};f.prototype.bitLength=function(){return 0>=this.t?0:this.DB*(this.t-1)+g(this.data[this.t-1]^this.s&this.DM)};f.prototype.mod=function(a){var b=d();this.abs().divRemTo(a,
null,b);0>this.s&&0<b.compareTo(f.ZERO)&&a.subTo(b,b);return b};f.prototype.modPowInt=function(a,b){var c;c=256>a||b.isEven()?new h(b):new p(b);return this.exp(a,c)};f.ZERO=a(0);f.ONE=a(1);m.prototype.convert=n;m.prototype.revert=n;m.prototype.mulTo=function(a,b,c){a.multiplyTo(b,c)};m.prototype.sqrTo=function(a,b){a.squareTo(b)};z.prototype.convert=function(a){if(0>a.s||a.t>2*this.m.t)return a.mod(this.m);if(0>a.compareTo(this.m))return a;var b=d();a.copyTo(b);this.reduce(b);return b};z.prototype.revert=
function(a){return a};z.prototype.reduce=function(a){a.drShiftTo(this.m.t-1,this.r2);a.t>this.m.t+1&&(a.t=this.m.t+1,a.clamp());this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3);for(this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);0>a.compareTo(this.r2);)a.dAddOffset(1,this.m.t+1);for(a.subTo(this.r2,a);0<=a.compareTo(this.m);)a.subTo(this.m,a)};z.prototype.mulTo=function(a,b,c){a.multiplyTo(b,c);this.reduce(c)};z.prototype.sqrTo=function(a,b){a.squareTo(b);this.reduce(b)};var B=[2,3,5,7,11,13,
17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509],r=67108864/B[B.length-1];f.prototype.chunkSize=function(a){return Math.floor(Math.LN2*this.DB/Math.log(a))};f.prototype.toRadix=function(b){null==b&&(b=10);
if(0==this.signum()||2>b||36<b)return"0";var c=this.chunkSize(b),c=Math.pow(b,c),e=a(c),g=d(),n=d(),h="";for(this.divRemTo(e,g,n);0<g.signum();)h=(c+n.intValue()).toString(b).substr(1)+h,g.divRemTo(e,g,n);return n.intValue().toString(b)+h};f.prototype.fromRadix=function(a,b){this.fromInt(0);null==b&&(b=10);for(var c=this.chunkSize(b),d=Math.pow(b,c),e=!1,g=0,n=0,h=0;h<a.length;++h){var p=l(a,h);0>p?"-"==a.charAt(h)&&0==this.signum()&&(e=!0):(n=b*n+p,++g>=c&&(this.dMultiply(d),this.dAddOffset(n,0),
n=g=0))}0<g&&(this.dMultiply(Math.pow(b,g)),this.dAddOffset(n,0));e&&f.ZERO.subTo(this,this)};f.prototype.fromNumber=function(a,b,c){if("number"==typeof b)if(2>a)this.fromInt(1);else for(this.fromNumber(a,c),this.testBit(a-1)||this.bitwiseTo(f.ONE.shiftLeft(a-1),e,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(b);)this.dAddOffset(2,0),this.bitLength()>a&&this.subTo(f.ONE.shiftLeft(a-1),this);else{c=[];var d=a&7;c.length=(a>>3)+1;b.nextBytes(c);c[0]=0<d?c[0]&(1<<d)-1:0;this.fromString(c,
256)}};f.prototype.bitwiseTo=function(a,b,c){var d,e,g=Math.min(a.t,this.t);for(d=0;d<g;++d)c.data[d]=b(this.data[d],a.data[d]);if(a.t<this.t){e=a.s&this.DM;for(d=g;d<this.t;++d)c.data[d]=b(this.data[d],e);c.t=this.t}else{e=this.s&this.DM;for(d=g;d<a.t;++d)c.data[d]=b(e,a.data[d]);c.t=a.t}c.s=b(this.s,a.s);c.clamp()};f.prototype.changeBit=function(a,b){var c=f.ONE.shiftLeft(a);this.bitwiseTo(c,b,c);return c};f.prototype.addTo=function(a,b){for(var c=0,d=0,e=Math.min(a.t,this.t);c<e;)d+=this.data[c]+
a.data[c],b.data[c++]=d&this.DM,d>>=this.DB;if(a.t<this.t){for(d+=a.s;c<this.t;)d+=this.data[c],b.data[c++]=d&this.DM,d>>=this.DB;d+=this.s}else{for(d+=this.s;c<a.t;)d+=a.data[c],b.data[c++]=d&this.DM,d>>=this.DB;d+=a.s}b.s=0>d?-1:0;0<d?b.data[c++]=d:-1>d&&(b.data[c++]=this.DV+d);b.t=c;b.clamp()};f.prototype.dMultiply=function(a){this.data[this.t]=this.am(0,a-1,this,0,0,this.t);++this.t;this.clamp()};f.prototype.dAddOffset=function(a,b){if(0!=a){for(;this.t<=b;)this.data[this.t++]=0;for(this.data[b]+=
a;this.data[b]>=this.DV;)this.data[b]-=this.DV,++b>=this.t&&(this.data[this.t++]=0),++this.data[b]}};f.prototype.multiplyLowerTo=function(a,b,c){var d=Math.min(this.t+a.t,b);c.s=0;for(c.t=d;0<d;)c.data[--d]=0;var e;for(e=c.t-this.t;d<e;++d)c.data[d+this.t]=this.am(0,a.data[d],c,d,0,this.t);for(e=Math.min(a.t,b);d<e;++d)this.am(0,a.data[d],c,d,0,b-d);c.clamp()};f.prototype.multiplyUpperTo=function(a,b,c){--b;var d=c.t=this.t+a.t-b;for(c.s=0;0<=--d;)c.data[d]=0;for(d=Math.max(b-this.t,0);d<a.t;++d)c.data[this.t+
d-b]=this.am(b-d,a.data[d],c,0,0,this.t+d-b);c.clamp();c.drShiftTo(1,c)};f.prototype.modInt=function(a){if(0>=a)return 0;var b=this.DV%a,c=0>this.s?a-1:0;if(0<this.t)if(0==b)c=this.data[0]%a;else for(var d=this.t-1;0<=d;--d)c=(b*c+this.data[d])%a;return c};f.prototype.millerRabin=function(a){var b=this.subtract(f.ONE),c=b.getLowestSetBit();if(0>=c)return!1;for(var d=b.shiftRight(c),e=w(),g,n=0;n<a;++n){do g=new f(this.bitLength(),e);while(0>=g.compareTo(f.ONE)||0<=g.compareTo(b));g=g.modPow(d,this);
if(0!=g.compareTo(f.ONE)&&0!=g.compareTo(b)){for(var h=1;h++<c&&0!=g.compareTo(b);)if(g=g.modPowInt(2,this),0==g.compareTo(f.ONE))return!1;if(0!=g.compareTo(b))return!1}}return!0};f.prototype.clone=function(){var a=d();this.copyTo(a);return a};f.prototype.intValue=function(){if(0>this.s){if(1==this.t)return this.data[0]-this.DV;if(0==this.t)return-1}else{if(1==this.t)return this.data[0];if(0==this.t)return 0}return(this.data[1]&(1<<32-this.DB)-1)<<this.DB|this.data[0]};f.prototype.byteValue=function(){return 0==
this.t?this.s:this.data[0]<<24>>24};f.prototype.shortValue=function(){return 0==this.t?this.s:this.data[0]<<16>>16};f.prototype.signum=function(){return 0>this.s?-1:0>=this.t||1==this.t&&0>=this.data[0]?0:1};f.prototype.toByteArray=function(){var a=this.t,b=[];b[0]=this.s;var c=this.DB-a*this.DB%8,d,e=0;if(0<a--)for(c<this.DB&&(d=this.data[a]>>c)!=(this.s&this.DM)>>c&&(b[e++]=d|this.s<<this.DB-c);0<=a;)if(8>c?(d=(this.data[a]&(1<<c)-1)<<8-c,d|=this.data[--a]>>(c+=this.DB-8)):(d=this.data[a]>>(c-=
8)&255,0>=c&&(c+=this.DB,--a)),0!=(d&128)&&(d|=-256),0==e&&(this.s&128)!=(d&128)&&++e,0<e||d!=this.s)b[e++]=d;return b};f.prototype.equals=function(a){return 0==this.compareTo(a)};f.prototype.min=function(a){return 0>this.compareTo(a)?this:a};f.prototype.max=function(a){return 0<this.compareTo(a)?this:a};f.prototype.and=function(a){var b=d();this.bitwiseTo(a,t,b);return b};f.prototype.or=function(a){var b=d();this.bitwiseTo(a,e,b);return b};f.prototype.xor=function(a){var b=d();this.bitwiseTo(a,x,
b);return b};f.prototype.andNot=function(a){var b=d();this.bitwiseTo(a,A,b);return b};f.prototype.not=function(){for(var a=d(),b=0;b<this.t;++b)a.data[b]=this.DM&~this.data[b];a.t=this.t;a.s=~this.s;return a};f.prototype.shiftLeft=function(a){var b=d();0>a?this.rShiftTo(-a,b):this.lShiftTo(a,b);return b};f.prototype.shiftRight=function(a){var b=d();0>a?this.lShiftTo(-a,b):this.rShiftTo(a,b);return b};f.prototype.getLowestSetBit=function(){for(var a=0;a<this.t;++a)if(0!=this.data[a]){var b=a*this.DB;
a=this.data[a];if(0==a)a=-1;else{var c=0;0==(a&65535)&&(a>>=16,c+=16);0==(a&255)&&(a>>=8,c+=8);0==(a&15)&&(a>>=4,c+=4);0==(a&3)&&(a>>=2,c+=2);0==(a&1)&&++c;a=c}return b+a}return 0>this.s?this.t*this.DB:-1};f.prototype.bitCount=function(){for(var a=0,b=this.s&this.DM,c=0;c<this.t;++c){for(var d=this.data[c]^b,e=0;0!=d;)d&=d-1,++e;a+=e}return a};f.prototype.testBit=function(a){var b=Math.floor(a/this.DB);return b>=this.t?0!=this.s:0!=(this.data[b]&1<<a%this.DB)};f.prototype.setBit=function(a){return this.changeBit(a,
e)};f.prototype.clearBit=function(a){return this.changeBit(a,A)};f.prototype.flipBit=function(a){return this.changeBit(a,x)};f.prototype.add=function(a){var b=d();this.addTo(a,b);return b};f.prototype.subtract=function(a){var b=d();this.subTo(a,b);return b};f.prototype.multiply=function(a){var b=d();this.multiplyTo(a,b);return b};f.prototype.divide=function(a){var b=d();this.divRemTo(a,b,null);return b};f.prototype.remainder=function(a){var b=d();this.divRemTo(a,null,b);return b};f.prototype.divideAndRemainder=
function(a){var b=d(),c=d();this.divRemTo(a,b,c);return[b,c]};f.prototype.modPow=function(b,c){var e=b.bitLength(),n,f=a(1),l;if(0>=e)return f;n=18>e?1:48>e?3:144>e?4:768>e?5:6;l=8>e?new h(c):c.isEven()?new z(c):new p(c);var t=[],s=3,x=n-1,k=(1<<n)-1;t[1]=l.convert(this);if(1<n)for(e=d(),l.sqrTo(t[1],e);s<=k;)t[s]=d(),l.mulTo(e,t[s-2],t[s]),s+=2;for(var w=b.t-1,A,v=!0,m=d(),e=g(b.data[w])-1;0<=w;){e>=x?A=b.data[w]>>e-x&k:(A=(b.data[w]&(1<<e+1)-1)<<x-e,0<w&&(A|=b.data[w-1]>>this.DB+e-x));for(s=n;0==
(A&1);)A>>=1,--s;0>(e-=s)&&(e+=this.DB,--w);if(v)t[A].copyTo(f),v=!1;else{for(;1<s;)l.sqrTo(f,m),l.sqrTo(m,f),s-=2;0<s?l.sqrTo(f,m):(s=f,f=m,m=s);l.mulTo(m,t[A],f)}for(;0<=w&&0==(b.data[w]&1<<e);)l.sqrTo(f,m),s=f,f=m,m=s,0>--e&&(e=this.DB-1,--w)}return l.revert(f)};f.prototype.modInverse=function(b){var c=b.isEven();if(this.isEven()&&c||0==b.signum())return f.ZERO;for(var d=b.clone(),e=this.clone(),g=a(1),n=a(0),h=a(0),p=a(1);0!=d.signum();){for(;d.isEven();)d.rShiftTo(1,d),c?(g.isEven()&&n.isEven()||
(g.addTo(this,g),n.subTo(b,n)),g.rShiftTo(1,g)):n.isEven()||n.subTo(b,n),n.rShiftTo(1,n);for(;e.isEven();)e.rShiftTo(1,e),c?(h.isEven()&&p.isEven()||(h.addTo(this,h),p.subTo(b,p)),h.rShiftTo(1,h)):p.isEven()||p.subTo(b,p),p.rShiftTo(1,p);0<=d.compareTo(e)?(d.subTo(e,d),c&&g.subTo(h,g),n.subTo(p,n)):(e.subTo(d,e),c&&h.subTo(g,h),p.subTo(n,p))}if(0!=e.compareTo(f.ONE))return f.ZERO;if(0<=p.compareTo(b))return p.subtract(b);if(0>p.signum())p.addTo(b,p);else return p;return 0>p.signum()?p.add(b):p};f.prototype.pow=
function(a){return this.exp(a,new m)};f.prototype.gcd=function(a){var b=0>this.s?this.negate():this.clone();a=0>a.s?a.negate():a.clone();if(0>b.compareTo(a)){var c=b,b=a;a=c}var c=b.getLowestSetBit(),d=a.getLowestSetBit();if(0>d)return b;c<d&&(d=c);0<d&&(b.rShiftTo(d,b),a.rShiftTo(d,a));for(;0<b.signum();)0<(c=b.getLowestSetBit())&&b.rShiftTo(c,b),0<(c=a.getLowestSetBit())&&a.rShiftTo(c,a),0<=b.compareTo(a)?(b.subTo(a,b),b.rShiftTo(1,b)):(a.subTo(b,a),a.rShiftTo(1,a));0<d&&a.lShiftTo(d,a);return a};
f.prototype.isProbablePrime=function(a){var b,c=this.abs();if(1==c.t&&c.data[0]<=B[B.length-1]){for(b=0;b<B.length;++b)if(c.data[0]==B[b])return!0;return!1}if(c.isEven())return!1;for(b=1;b<B.length;){for(var d=B[b],e=b+1;e<B.length&&d<r;)d*=B[e++];for(d=c.modInt(d);b<e;)if(0==d%B[b++])return!1}return c.millerRabin(a)};c.jsbn=c.jsbn||{};c.jsbn.BigInteger=f}if("function"!==typeof define)if("object"===typeof module&&module.exports){var q=!0;define=function(c,f){f(require,module)}}else return"undefined"===
typeof forge&&(forge={}),k(forge);var m,r=function(c,f){f.exports=function(d){var f=m.map(function(b){return c(b)}).concat(k);d=d||{};d.defined=d.defined||{};if(d.defined.jsbn)return d.jsbn;d.defined.jsbn=!0;for(var b=0;b<f.length;++b)f[b](d);return d.jsbn}},u=define;define=function(c,f){m="string"===typeof c?f.slice(2):c.slice(2);if(q)return delete define,u.apply(null,Array.prototype.slice.call(arguments,0));define=u;return define.apply(null,Array.prototype.slice.call(arguments,0))};define(["require",
"module"],function(){r.apply(null,Array.prototype.slice.call(arguments,0))})})();(function(){function k(c){c.cipher=c.cipher||{};c.cipher.algorithms=c.cipher.algorithms||{};c.cipher.createCipher=function(d,f){var b=d;"string"===typeof b&&(b=c.cipher.getAlgorithm(b))&&(b=b());if(!b)throw Error("Unsupported algorithm: "+d);return new c.cipher.BlockCipher({algorithm:b,key:f,decrypt:!1})};c.cipher.createDecipher=function(d,f){var b=d;"string"===typeof b&&(b=c.cipher.getAlgorithm(b))&&(b=b());if(!b)throw Error("Unsupported algorithm: "+d);return new c.cipher.BlockCipher({algorithm:b,
key:f,decrypt:!0})};c.cipher.registerAlgorithm=function(d,f){d=d.toUpperCase();c.cipher.algorithms[d]=f};c.cipher.getAlgorithm=function(d){d=d.toUpperCase();return d in c.cipher.algorithms?c.cipher.algorithms[d]:null};var f=c.cipher.BlockCipher=function(c){this.algorithm=c.algorithm;this.mode=this.algorithm.mode;this.blockSize=this.mode.blockSize;this._finish=!1;this.output=this._input=null;this._op=c.decrypt?this.mode.decrypt:this.mode.encrypt;this._decrypt=c.decrypt;this.algorithm.initialize(c)};
f.prototype.start=function(d){d=d||{};var f={},b;for(b in d)f[b]=d[b];f.decrypt=this._decrypt;this._finish=!1;this._input=c.util.createBuffer();this.output=d.output||c.util.createBuffer();this.mode.start(f)};f.prototype.update=function(c){for(c&&this._input.putBuffer(c);!this._op.call(this.mode,this._input,this.output,this._finish)&&!this._finish;);this._input.compact()};f.prototype.finish=function(c){!c||"ECB"!==this.mode.name&&"CBC"!==this.mode.name||(this.mode.pad=function(b){return c(this.blockSize,
b,!1)},this.mode.unpad=function(b){return c(this.blockSize,b,!0)});var f={};f.decrypt=this._decrypt;f.overflow=this._input.length()%this.blockSize;if(!this._decrypt&&this.mode.pad&&!this.mode.pad(this._input,f))return!1;this._finish=!0;this.update();return this._decrypt&&this.mode.unpad&&!this.mode.unpad(this.output,f)||this.mode.afterFinish&&!this.mode.afterFinish(this.output,f)?!1:!0}}if("function"!==typeof define)if("object"===typeof module&&module.exports){var q=!0;define=function(c,f){f(require,
module)}}else return"undefined"===typeof forge&&(forge={}),k(forge);var m,r=function(c,f){f.exports=function(d){var f=m.map(function(b){return c(b)}).concat(k);d=d||{};d.defined=d.defined||{};if(d.defined.cipher)return d.cipher;d.defined.cipher=!0;for(var b=0;b<f.length;++b)f[b](d);return d.cipher}},u=define;define=function(c,f){m="string"===typeof c?f.slice(2):c.slice(2);if(q)return delete define,u.apply(null,Array.prototype.slice.call(arguments,0));define=u;return define.apply(null,Array.prototype.slice.call(arguments,
0))};define(["require","module","./util"],function(){r.apply(null,Array.prototype.slice.call(arguments,0))})})();(function(){function k(c){function f(b){"string"===typeof b&&(b=c.util.createBuffer(b));if(c.util.isArray(b)&&4<b.length){var d=b;b=c.util.createBuffer();for(var f=0;f<d.length;++f)b.putByte(d[f])}c.util.isArray(b)||(b=[b.getInt32(),b.getInt32(),b.getInt32(),b.getInt32()]);return b}function d(b){b[b.length-1]=b[b.length-1]+1&4294967295}c.cipher=c.cipher||{};var k=c.cipher.modes=c.cipher.modes||{};k.ecb=function(b){b=b||{};this.name="ECB";this.cipher=b.cipher;this.blockSize=b.blockSize||16;this._ints=
this.blockSize/4;this._inBlock=Array(this._ints);this._outBlock=Array(this._ints)};k.ecb.prototype.start=function(b){};k.ecb.prototype.encrypt=function(b,c,d){if(b.length()<this.blockSize&&!(d&&0<b.length()))return!0;for(d=0;d<this._ints;++d)this._inBlock[d]=b.getInt32();this.cipher.encrypt(this._inBlock,this._outBlock);for(d=0;d<this._ints;++d)c.putInt32(this._outBlock[d])};k.ecb.prototype.decrypt=function(b,c,d){if(b.length()<this.blockSize&&!(d&&0<b.length()))return!0;for(d=0;d<this._ints;++d)this._inBlock[d]=
b.getInt32();this.cipher.decrypt(this._inBlock,this._outBlock);for(d=0;d<this._ints;++d)c.putInt32(this._outBlock[d])};k.ecb.prototype.pad=function(b,c){var d=b.length()===this.blockSize?this.blockSize:this.blockSize-b.length();b.fillWithByte(d,d);return!0};k.ecb.prototype.unpad=function(b,c){if(0<c.overflow)return!1;var d=b.length(),d=b.at(d-1);if(d>this.blockSize<<2)return!1;b.truncate(d);return!0};k.cbc=function(b){b=b||{};this.name="CBC";this.cipher=b.cipher;this.blockSize=b.blockSize||16;this._ints=
this.blockSize/4;this._inBlock=Array(this._ints);this._outBlock=Array(this._ints)};k.cbc.prototype.start=function(b){if(null===b.iv){if(!this._prev)throw Error("Invalid IV parameter.");this._iv=this._prev.slice(0)}else if("iv"in b)this._iv=f(b.iv),this._prev=this._iv.slice(0);else throw Error("Invalid IV parameter.");};k.cbc.prototype.encrypt=function(b,c,d){if(b.length()<this.blockSize&&!(d&&0<b.length()))return!0;for(d=0;d<this._ints;++d)this._inBlock[d]=this._prev[d]^b.getInt32();this.cipher.encrypt(this._inBlock,
this._outBlock);for(d=0;d<this._ints;++d)c.putInt32(this._outBlock[d]);this._prev=this._outBlock};k.cbc.prototype.decrypt=function(b,c,d){if(b.length()<this.blockSize&&!(d&&0<b.length()))return!0;for(d=0;d<this._ints;++d)this._inBlock[d]=b.getInt32();this.cipher.decrypt(this._inBlock,this._outBlock);for(d=0;d<this._ints;++d)c.putInt32(this._prev[d]^this._outBlock[d]);this._prev=this._inBlock.slice(0)};k.cbc.prototype.pad=function(b,c){var d=b.length()===this.blockSize?this.blockSize:this.blockSize-
b.length();b.fillWithByte(d,d);return!0};k.cbc.prototype.unpad=function(b,c){if(0<c.overflow)return!1;var d=b.length(),d=b.at(d-1);if(d>this.blockSize<<2)return!1;b.truncate(d);return!0};k.cfb=function(b){b=b||{};this.name="CFB";this.cipher=b.cipher;this.blockSize=b.blockSize||16;this._ints=this.blockSize/4;this._inBlock=null;this._outBlock=Array(this._ints);this._partialBlock=Array(this._ints);this._partialOutput=c.util.createBuffer();this._partialBytes=0};k.cfb.prototype.start=function(b){if(!("iv"in
b))throw Error("Invalid IV parameter.");this._iv=f(b.iv);this._inBlock=this._iv.slice(0);this._partialBytes=0};k.cfb.prototype.encrypt=function(b,c,d){var a=b.length();if(0===a)return!0;this.cipher.encrypt(this._inBlock,this._outBlock);if(0===this._partialBytes&&a>=this.blockSize)for(var g=0;g<this._ints;++g)this._inBlock[g]=b.getInt32()^this._outBlock[g],c.putInt32(this._inBlock[g]);else{var h=(this.blockSize-a)%this.blockSize;0<h&&(h=this.blockSize-h);this._partialOutput.clear();for(g=0;g<this._ints;++g)this._partialBlock[g]=
b.getInt32()^this._outBlock[g],this._partialOutput.putInt32(this._partialBlock[g]);if(0<h)b.read-=this.blockSize;else for(g=0;g<this._ints;++g)this._inBlock[g]=this._partialBlock[g];0<this._partialBytes&&this._partialOutput.getBytes(this._partialBytes);if(0<h&&!d)return c.putBytes(this._partialOutput.getBytes(h-this._partialBytes)),this._partialBytes=h,!0;c.putBytes(this._partialOutput.getBytes(a-this._partialBytes));this._partialBytes=0}};k.cfb.prototype.decrypt=function(b,c,d){var a=b.length();
if(0===a)return!0;this.cipher.encrypt(this._inBlock,this._outBlock);if(0===this._partialBytes&&a>=this.blockSize)for(var g=0;g<this._ints;++g)this._inBlock[g]=b.getInt32(),c.putInt32(this._inBlock[g]^this._outBlock[g]);else{var h=(this.blockSize-a)%this.blockSize;0<h&&(h=this.blockSize-h);this._partialOutput.clear();for(g=0;g<this._ints;++g)this._partialBlock[g]=b.getInt32(),this._partialOutput.putInt32(this._partialBlock[g]^this._outBlock[g]);if(0<h)b.read-=this.blockSize;else for(g=0;g<this._ints;++g)this._inBlock[g]=
this._partialBlock[g];0<this._partialBytes&&this._partialOutput.getBytes(this._partialBytes);if(0<h&&!d)return c.putBytes(this._partialOutput.getBytes(h-this._partialBytes)),this._partialBytes=h,!0;c.putBytes(this._partialOutput.getBytes(a-this._partialBytes));this._partialBytes=0}};k.ofb=function(b){b=b||{};this.name="OFB";this.cipher=b.cipher;this.blockSize=b.blockSize||16;this._ints=this.blockSize/4;this._inBlock=null;this._outBlock=Array(this._ints);this._partialOutput=c.util.createBuffer();this._partialBytes=
0};k.ofb.prototype.start=function(b){if(!("iv"in b))throw Error("Invalid IV parameter.");this._iv=f(b.iv);this._inBlock=this._iv.slice(0);this._partialBytes=0};k.ofb.prototype.encrypt=function(b,c,d){var a=b.length();if(0===b.length())return!0;this.cipher.encrypt(this._inBlock,this._outBlock);if(0===this._partialBytes&&a>=this.blockSize)for(var g=0;g<this._ints;++g)c.putInt32(b.getInt32()^this._outBlock[g]),this._inBlock[g]=this._outBlock[g];else{var h=(this.blockSize-a)%this.blockSize;0<h&&(h=this.blockSize-
h);this._partialOutput.clear();for(g=0;g<this._ints;++g)this._partialOutput.putInt32(b.getInt32()^this._outBlock[g]);if(0<h)b.read-=this.blockSize;else for(g=0;g<this._ints;++g)this._inBlock[g]=this._outBlock[g];0<this._partialBytes&&this._partialOutput.getBytes(this._partialBytes);if(0<h&&!d)return c.putBytes(this._partialOutput.getBytes(h-this._partialBytes)),this._partialBytes=h,!0;c.putBytes(this._partialOutput.getBytes(a-this._partialBytes));this._partialBytes=0}};k.ofb.prototype.decrypt=k.ofb.prototype.encrypt;
k.ctr=function(b){b=b||{};this.name="CTR";this.cipher=b.cipher;this.blockSize=b.blockSize||16;this._ints=this.blockSize/4;this._inBlock=null;this._outBlock=Array(this._ints);this._partialOutput=c.util.createBuffer();this._partialBytes=0};k.ctr.prototype.start=function(b){if(!("iv"in b))throw Error("Invalid IV parameter.");this._iv=f(b.iv);this._inBlock=this._iv.slice(0);this._partialBytes=0};k.ctr.prototype.encrypt=function(b,c,f){var a=b.length();if(0===a)return!0;this.cipher.encrypt(this._inBlock,
this._outBlock);if(0===this._partialBytes&&a>=this.blockSize)for(var g=0;g<this._ints;++g)c.putInt32(b.getInt32()^this._outBlock[g]);else{var h=(this.blockSize-a)%this.blockSize;0<h&&(h=this.blockSize-h);this._partialOutput.clear();for(g=0;g<this._ints;++g)this._partialOutput.putInt32(b.getInt32()^this._outBlock[g]);0<h&&(b.read-=this.blockSize);0<this._partialBytes&&this._partialOutput.getBytes(this._partialBytes);if(0<h&&!f)return c.putBytes(this._partialOutput.getBytes(h-this._partialBytes)),this._partialBytes=
h,!0;c.putBytes(this._partialOutput.getBytes(a-this._partialBytes));this._partialBytes=0}d(this._inBlock)};k.ctr.prototype.decrypt=k.ctr.prototype.encrypt;k.gcm=function(b){b=b||{};this.name="GCM";this.cipher=b.cipher;this.blockSize=b.blockSize||16;this._ints=this.blockSize/4;this._inBlock=Array(this._ints);this._outBlock=Array(this._ints);this._partialOutput=c.util.createBuffer();this._partialBytes=0;this._R=3774873600};k.gcm.prototype.start=function(b){if(!("iv"in b))throw Error("Invalid IV parameter.");
var f=c.util.createBuffer(b.iv);this._cipherLength=0;var l;l="additionalData"in b?c.util.createBuffer(b.additionalData):c.util.createBuffer();this._tagLength="tagLength"in b?b.tagLength:128;this._tag=null;if(b.decrypt&&(this._tag=c.util.createBuffer(b.tag).getBytes(),this._tag.length!==this._tagLength/8))throw Error("Authentication tag does not match tag length.");this._hashBlock=Array(this._ints);this.tag=null;this._hashSubkey=Array(this._ints);this.cipher.encrypt([0,0,0,0],this._hashSubkey);this.componentBits=
4;this._m=this.generateHashTable(this._hashSubkey,this.componentBits);b=f.length();if(12===b)this._j0=[f.getInt32(),f.getInt32(),f.getInt32(),1];else{for(this._j0=[0,0,0,0];0<f.length();)this._j0=this.ghash(this._hashSubkey,this._j0,[f.getInt32(),f.getInt32(),f.getInt32(),f.getInt32()]);this._j0=this.ghash(this._hashSubkey,this._j0,[0,0].concat([8*b/4294967296|0,8*b&4294967295]))}this._inBlock=this._j0.slice(0);d(this._inBlock);this._partialBytes=0;l=c.util.createBuffer(l);f=8*l.length();this._aDataLength=
[f/4294967296|0,f&4294967295];(f=l.length()%this.blockSize)&&l.fillWithByte(0,this.blockSize-f);for(this._s=[0,0,0,0];0<l.length();)this._s=this.ghash(this._hashSubkey,this._s,[l.getInt32(),l.getInt32(),l.getInt32(),l.getInt32()])};k.gcm.prototype.encrypt=function(b,c,f){var a=b.length();if(0===a)return!0;this.cipher.encrypt(this._inBlock,this._outBlock);if(0===this._partialBytes&&a>=this.blockSize){for(var g=0;g<this._ints;++g)c.putInt32(this._outBlock[g]^=b.getInt32());this._cipherLength+=this.blockSize}else{var h=
(this.blockSize-a)%this.blockSize;0<h&&(h=this.blockSize-h);this._partialOutput.clear();for(g=0;g<this._ints;++g)this._partialOutput.putInt32(b.getInt32()^this._outBlock[g]);if(0===h||f){f?(g=a%this.blockSize,this._cipherLength+=g,this._partialOutput.truncate(this.blockSize-g)):this._cipherLength+=this.blockSize;for(g=0;g<this._ints;++g)this._outBlock[g]=this._partialOutput.getInt32();this._partialOutput.read-=this.blockSize}0<this._partialBytes&&this._partialOutput.getBytes(this._partialBytes);if(0<
h&&!f)return b.read-=this.blockSize,c.putBytes(this._partialOutput.getBytes(h-this._partialBytes)),this._partialBytes=h,!0;c.putBytes(this._partialOutput.getBytes(a-this._partialBytes));this._partialBytes=0}this._s=this.ghash(this._hashSubkey,this._s,this._outBlock);d(this._inBlock)};k.gcm.prototype.decrypt=function(b,c,f){var a=b.length();if(a<this.blockSize&&!(f&&0<a))return!0;this.cipher.encrypt(this._inBlock,this._outBlock);d(this._inBlock);this._hashBlock[0]=b.getInt32();this._hashBlock[1]=b.getInt32();
this._hashBlock[2]=b.getInt32();this._hashBlock[3]=b.getInt32();this._s=this.ghash(this._hashSubkey,this._s,this._hashBlock);for(b=0;b<this._ints;++b)c.putInt32(this._outBlock[b]^this._hashBlock[b]);this._cipherLength=a<this.blockSize?this._cipherLength+a%this.blockSize:this._cipherLength+this.blockSize};k.gcm.prototype.afterFinish=function(b,d){var f=!0;d.decrypt&&d.overflow&&b.truncate(this.blockSize-d.overflow);this.tag=c.util.createBuffer();var a=this._aDataLength.concat([8*this._cipherLength/
4294967296|0,8*this._cipherLength&4294967295]);this._s=this.ghash(this._hashSubkey,this._s,a);a=[];this.cipher.encrypt(this._j0,a);for(var g=0;g<this._ints;++g)this.tag.putInt32(this._s[g]^a[g]);this.tag.truncate(this.tag.length()%(this._tagLength/8));d.decrypt&&this.tag.bytes()!==this._tag&&(f=!1);return f};k.gcm.prototype.multiply=function(b,c){for(var d=[0,0,0,0],a=c.slice(0),g=0;128>g;++g)b[g/32|0]&1<<31-g%32&&(d[0]^=a[0],d[1]^=a[1],d[2]^=a[2],d[3]^=a[3]),this.pow(a,a);return d};k.gcm.prototype.pow=
function(b,c){for(var d=b[3]&1,a=3;0<a;--a)c[a]=b[a]>>>1|(b[a-1]&1)<<31;c[0]=b[0]>>>1;d&&(c[0]^=this._R)};k.gcm.prototype.tableMultiply=function(b){for(var c=[0,0,0,0],d=0;32>d;++d){var a=this._m[d][b[d/8|0]>>>4*(7-d%8)&15];c[0]^=a[0];c[1]^=a[1];c[2]^=a[2];c[3]^=a[3]}return c};k.gcm.prototype.ghash=function(b,c,d){c[0]^=d[0];c[1]^=d[1];c[2]^=d[2];c[3]^=d[3];return this.tableMultiply(c)};k.gcm.prototype.generateHashTable=function(b,c){for(var d=8/c,a=4*d,d=16*d,g=Array(d),h=0;h<d;++h){var p=[0,0,0,
0];p[h/a|0]=1<<c-1<<(a-1-h%a)*c;g[h]=this.generateSubHashTable(this.multiply(p,b),c)}return g};k.gcm.prototype.generateSubHashTable=function(b,c){var d=1<<c,a=d>>>1,g=Array(d);g[a]=b.slice(0);for(var h=a>>>1;0<h;)this.pow(g[2*h],g[h]=[]),h>>=1;for(h=2;h<a;){for(var p=1;p<h;++p){var f=g[h],e=g[p];g[h+p]=[f[0]^e[0],f[1]^e[1],f[2]^e[2],f[3]^e[3]]}h*=2}g[0]=[0,0,0,0];for(h=a+1;h<d;++h)p=g[h^a],g[h]=[b[0]^p[0],b[1]^p[1],b[2]^p[2],b[3]^p[3]];return g}}if("function"!==typeof define)if("object"===typeof module&&
module.exports){var q=!0;define=function(c,f){f(require,module)}}else return"undefined"===typeof forge&&(forge={}),k(forge);var m,r=function(c,f){f.exports=function(d){var f=m.map(function(b){return c(b)}).concat(k);d=d||{};d.defined=d.defined||{};if(d.defined.cipherModes)return d.cipherModes;d.defined.cipherModes=!0;for(var b=0;b<f.length;++b)f[b](d);return d.cipherModes}},u=define;define=function(c,f){m="string"===typeof c?f.slice(2):c.slice(2);if(q)return delete define,u.apply(null,Array.prototype.slice.call(arguments,
0));define=u;return define.apply(null,Array.prototype.slice.call(arguments,0))};define(["require","module","./util"],function(){r.apply(null,Array.prototype.slice.call(arguments,0))})})();(function(){function k(c){function f(a,b){c.cipher.registerAlgorithm(a,function(){return new c.aes.Algorithm(a,b)})}function d(){l=!0;p=[0,1,2,4,8,16,32,64,128,27,54];for(var a=Array(256),b=0;128>b;++b)a[b]=b<<1,a[b+128]=b+128<<1^283;g=Array(256);h=Array(256);t=Array(4);e=Array(4);for(b=0;4>b;++b)t[b]=Array(256),e[b]=Array(256);for(var c=0,d=0,f,k,m,s,q,b=0;256>b;++b){s=d^d<<1^d<<2^d<<3^d<<4;s=s>>8^s&255^99;g[c]=s;h[s]=c;q=a[s];f=a[c];k=a[f];m=a[k];q^=q<<24^s<<16^s<<8^s;k=(f^k^m)<<24^(c^m)<<16^(c^
k^m)<<8^c^f^m;for(var v=0;4>v;++v)t[v][c]=q,e[v][s]=k,q=q<<24|q>>>8,k=k<<24|k>>>8;0===c?c=d=1:(c=f^a[a[a[f^m]]],d^=a[a[d]])}}function k(b,c){for(var d=b.slice(0),n,h=1,f=d.length,t=a*(f+6+1),l=f;l<t;++l)n=d[l-1],0===l%f?(n=g[n>>>16&255]<<24^g[n>>>8&255]<<16^g[n&255]<<8^g[n>>>24]^p[h]<<24,h++):6<f&&4===l%f&&(n=g[n>>>24]<<24^g[n>>>16&255]<<16^g[n>>>8&255]<<8^g[n&255]),d[l]=d[l-f]^n;if(c){for(var h=e[0],f=e[1],m=e[2],s=e[3],q=d.slice(0),t=d.length,l=0,v=t-a;l<t;l+=a,v-=a)if(0===l||l===t-a)q[l]=d[v],
q[l+1]=d[v+3],q[l+2]=d[v+2],q[l+3]=d[v+1];else for(var r=0;r<a;++r)n=d[v+r],q[l+(3&-r)]=h[g[n>>>24]]^f[g[n>>>16&255]]^m[g[n>>>8&255]]^s[g[n&255]];d=q}return d}function b(a,b,c,d){var p=a.length/4-1,f,k,l,m,s;d?(f=e[0],k=e[1],l=e[2],m=e[3],s=h):(f=t[0],k=t[1],l=t[2],m=t[3],s=g);var q,v,r,u,G,H;q=b[0]^a[0];v=b[d?3:1]^a[1];r=b[2]^a[2];b=b[d?1:3]^a[3];for(var C=3,I=1;I<p;++I)u=f[q>>>24]^k[v>>>16&255]^l[r>>>8&255]^m[b&255]^a[++C],G=f[v>>>24]^k[r>>>16&255]^l[b>>>8&255]^m[q&255]^a[++C],H=f[r>>>24]^k[b>>>
16&255]^l[q>>>8&255]^m[v&255]^a[++C],b=f[b>>>24]^k[q>>>16&255]^l[v>>>8&255]^m[r&255]^a[++C],q=u,v=G,r=H;c[0]=s[q>>>24]<<24^s[v>>>16&255]<<16^s[r>>>8&255]<<8^s[b&255]^a[++C];c[d?3:1]=s[v>>>24]<<24^s[r>>>16&255]<<16^s[b>>>8&255]<<8^s[q&255]^a[++C];c[2]=s[r>>>24]<<24^s[b>>>16&255]<<16^s[q>>>8&255]<<8^s[v&255]^a[++C];c[d?1:3]=s[b>>>24]<<24^s[q>>>16&255]<<16^s[v>>>8&255]<<8^s[r&255]^a[++C]}function m(a){a=a||{};var b="AES-"+(a.mode||"CBC").toUpperCase(),d;d=a.decrypt?c.cipher.createDecipher(b,a.key):c.cipher.createCipher(b,
a.key);var e=d.start;d.start=function(a,b){var g=null;b instanceof c.util.ByteBuffer&&(g=b,b={});b=b||{};b.output=g;b.iv=a;e.call(d,b)};return d}c.aes=c.aes||{};c.aes.startEncrypting=function(a,b,c,d){a=m({key:a,output:c,decrypt:!1,mode:d});a.start(b);return a};c.aes.createEncryptionCipher=function(a,b){return m({key:a,output:null,decrypt:!1,mode:b})};c.aes.startDecrypting=function(a,b,c,d){a=m({key:a,output:c,decrypt:!0,mode:d});a.start(b);return a};c.aes.createDecryptionCipher=function(a,b){return m({key:a,
output:null,decrypt:!0,mode:b})};c.aes.Algorithm=function(a,c){l||d();var e=this;e.name=a;e.mode=new c({blockSize:16,cipher:{encrypt:function(a,c){return b(e._w,a,c,!1)},decrypt:function(a,c){return b(e._w,a,c,!0)}}});e._init=!1};c.aes.Algorithm.prototype.initialize=function(a){if(!this._init){var b=a.key,d;if("string"===typeof b&&(16===b.length||24===b.length||32===b.length))b=c.util.createBuffer(b);else if(c.util.isArray(b)&&(16===b.length||24===b.length||32===b.length)){d=b;for(var b=c.util.createBuffer(),
e=0;e<d.length;++e)b.putByte(d[e])}if(!c.util.isArray(b)){d=b;var b=[],g=d.length();if(16===g||24===g||32===g)for(g>>>=2,e=0;e<g;++e)b.push(d.getInt32())}if(!c.util.isArray(b)||4!==b.length&&6!==b.length&&8!==b.length)throw Error("Invalid key parameter.");d=-1!==["CFB","OFB","CTR","GCM"].indexOf(this.mode.name);this._w=k(b,a.decrypt&&!d);this._init=!0}};c.aes._expandKey=function(a,b){l||d();return k(a,b)};c.aes._updateBlock=b;f("AES-ECB",c.cipher.modes.ecb);f("AES-CBC",c.cipher.modes.cbc);f("AES-CFB",
c.cipher.modes.cfb);f("AES-OFB",c.cipher.modes.ofb);f("AES-CTR",c.cipher.modes.ctr);f("AES-GCM",c.cipher.modes.gcm);var l=!1,a=4,g,h,p,t,e}if("function"!==typeof define)if("object"===typeof module&&module.exports){var q=!0;define=function(c,f){f(require,module)}}else return"undefined"===typeof forge&&(forge={}),k(forge);var m,r=function(c,f){f.exports=function(d){var f=m.map(function(b){return c(b)}).concat(k);d=d||{};d.defined=d.defined||{};if(d.defined.aes)return d.aes;d.defined.aes=!0;for(var b=
0;b<f.length;++b)f[b](d);return d.aes}},u=define;define=function(c,f){m="string"===typeof c?f.slice(2):c.slice(2);if(q)return delete define,u.apply(null,Array.prototype.slice.call(arguments,0));define=u;return define.apply(null,Array.prototype.slice.call(arguments,0))};define(["require","module","./cipher","./cipherModes","./util"],function(){r.apply(null,Array.prototype.slice.call(arguments,0))})})();(function(){function k(c){function f(b,a,c){for(var d,f,t,e,k,q,v,n,z,w,y,r,F,u=c.length();64<=u;){for(k=0;16>k;++k)a[k]=c.getInt32();for(;64>k;++k)d=a[k-2],d=(d>>>17|d<<15)^(d>>>19|d<<13)^d>>>10,f=a[k-15],f=(f>>>7|f<<25)^(f>>>18|f<<14)^f>>>3,a[k]=d+a[k-7]+f+a[k-16]|0;q=b.h0;v=b.h1;n=b.h2;z=b.h3;w=b.h4;y=b.h5;r=b.h6;F=b.h7;for(k=0;64>k;++k)d=(w>>>6|w<<26)^(w>>>11|w<<21)^(w>>>25|w<<7),t=r^w&(y^r),f=(q>>>2|q<<30)^(q>>>13|q<<19)^(q>>>22|q<<10),e=q&v|n&(q^v),d=F+d+t+m[k]+a[k],f+=e,F=r,r=y,y=w,w=z+d|0,
z=n,n=v,v=q,q=d+f|0;b.h0=b.h0+q|0;b.h1=b.h1+v|0;b.h2=b.h2+n|0;b.h3=b.h3+z|0;b.h4=b.h4+w|0;b.h5=b.h5+y|0;b.h6=b.h6+r|0;b.h7=b.h7+F|0;u-=64}}var d=c.sha256=c.sha256||{};c.md=c.md||{};c.md.algorithms=c.md.algorithms||{};c.md.sha256=c.md.algorithms.sha256=d;d.create=function(){b||(k=String.fromCharCode(128),k+=c.util.fillString(String.fromCharCode(0),64),m=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,
2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,
2756734187,3204031479,3329325298],b=!0);var d=null,a=c.util.createBuffer(),g=Array(64),h={algorithm:"sha256",blockLength:64,digestLength:32,messageLength:0,messageLength64:[0,0],start:function(){h.messageLength=0;h.messageLength64=[0,0];a=c.util.createBuffer();d={h0:1779033703,h1:3144134277,h2:1013904242,h3:2773480762,h4:1359893119,h5:2600822924,h6:528734635,h7:1541459225};return h}};h.start();h.update=function(b,t){"utf8"===t&&(b=c.util.encodeUtf8(b));h.messageLength+=b.length;h.messageLength64[0]+=
b.length/4294967296>>>0;h.messageLength64[1]+=b.length>>>0;a.putBytes(b);f(d,g,a);(2048<a.read||0===a.length())&&a.compact();return h};h.digest=function(){var b=c.util.createBuffer();b.putBytes(a.bytes());b.putBytes(k.substr(0,64-(h.messageLength64[1]+8&63)));b.putInt32(h.messageLength64[0]<<3|h.messageLength64[0]>>>28);b.putInt32(h.messageLength64[1]<<3);var t={h0:d.h0,h1:d.h1,h2:d.h2,h3:d.h3,h4:d.h4,h5:d.h5,h6:d.h6,h7:d.h7};f(t,g,b);b=c.util.createBuffer();b.putInt32(t.h0);b.putInt32(t.h1);b.putInt32(t.h2);
b.putInt32(t.h3);b.putInt32(t.h4);b.putInt32(t.h5);b.putInt32(t.h6);b.putInt32(t.h7);return b};return h};var k=null,b=!1,m=null}if("function"!==typeof define)if("object"===typeof module&&module.exports){var q=!0;define=function(c,f){f(require,module)}}else return"undefined"===typeof forge&&(forge={}),k(forge);var m,r=function(c,f){f.exports=function(d){var f=m.map(function(b){return c(b)}).concat(k);d=d||{};d.defined=d.defined||{};if(d.defined.sha256)return d.sha256;d.defined.sha256=!0;for(var b=
0;b<f.length;++b)f[b](d);return d.sha256}},u=define;define=function(c,f){m="string"===typeof c?f.slice(2):c.slice(2);if(q)return delete define,u.apply(null,Array.prototype.slice.call(arguments,0));define=u;return define.apply(null,Array.prototype.slice.call(arguments,0))};define(["require","module","./util"],function(){r.apply(null,Array.prototype.slice.call(arguments,0))})})();(function(){function k(c){c.md=c.md||{};c.md.algorithms={md5:c.md5,sha1:c.sha1,sha256:c.sha256};c.md.md5=c.md5;c.md.sha1=c.sha1;c.md.sha256=c.sha256}if("function"!==typeof define)if("object"===typeof module&&module.exports){var q=!0;define=function(c,f){f(require,module)}}else return"undefined"===typeof forge&&(forge={}),k(forge);var m,r=function(c,f){f.exports=function(d){var f=m.map(function(b){return c(b)}).concat(k);d=d||{};d.defined=d.defined||{};if(d.defined.md)return d.md;d.defined.md=!0;for(var b=
0;b<f.length;++b)f[b](d);return d.md}},u=define;define=function(c,f){m="string"===typeof c?f.slice(2):c.slice(2);if(q)return delete define,u.apply(null,Array.prototype.slice.call(arguments,0));define=u;return define.apply(null,Array.prototype.slice.call(arguments,0))};define("require module ./md5 ./sha1 ./sha256 ./sha512".split(" "),function(){r.apply(null,Array.prototype.slice.call(arguments,0))})})();(function(){function k(c){var f="undefined"!==typeof process&&process.versions&&process.versions.node,d=null;c.disableNativeCode||!f||process.versions["node-webkit"]||(d=require("crypto"));(c.prng=c.prng||{}).create=function(f){function b(b){if(32<=a.pools[0].messageLength)return k(),b();a.seedFile(32-a.pools[0].messageLength<<5,function(c,d){if(c)return b(c);a.collect(d);k();b()})}function k(){var b=a.plugin.md.create();b.update(a.pools[0].digest().getBytes());a.pools[0].start();for(var c=1,d=1;32>
d;++d)c=31===c?2147483648:c<<2,0===c%a.reseeds&&(b.update(a.pools[d].digest().getBytes()),a.pools[d].start());c=b.digest().getBytes();b.start();b.update(c);b=b.digest().getBytes();a.key=a.plugin.formatKey(c);a.seed=a.plugin.formatSeed(b);a.reseeds=4294967295===a.reseeds?0:a.reseeds+1;a.generated=0}function l(a){var b=null;if("undefined"!==typeof window){var d=window.crypto||window.msCrypto;d&&d.getRandomValues&&(b=function(a){return d.getRandomValues(a)})}var g=c.util.createBuffer();if(b)for(;g.length()<
a;){var h=Math.max(1,Math.min(a-g.length(),65536)/4),f=new Uint32Array(Math.floor(h));try{for(b(f),h=0;h<f.length;++h)g.putInt32(f[h])}catch(n){if(!("undefined"!==typeof QuotaExceededError&&n instanceof QuotaExceededError))throw n;}}if(g.length()<a)for(b=Math.floor(65536*Math.random());g.length()<a;)for(h=16807*(b&65535),b=16807*(b>>16),h+=(b&32767)<<16,h+=b>>15,h=(h&2147483647)+(h>>31),b=h&4294967295,h=0;3>h;++h)f=b>>>(h<<3),f^=Math.floor(256*Math.random()),g.putByte(f&255);return g.getBytes(a)}
var a={plugin:f,key:null,seed:null,time:null,reseeds:0,generated:0};f=f.md;for(var g=Array(32),h=0;32>h;++h)g[h]=f.create();a.pools=g;a.pool=0;a.generate=function(d,g){function e(m){if(m)return g(m);if(l.length()>=d)return g(null,l.getBytes(d));1048575<a.generated&&(a.key=null);if(null===a.key)return c.util.nextTick(function(){b(e)});m=h(a.key,a.seed);a.generated+=m.length;l.putBytes(m);a.key=k(h(a.key,f(a.seed)));a.seed=n(h(a.key,a.seed));c.util.setImmediate(e)}if(!g)return a.generateSync(d);var h=
a.plugin.cipher,f=a.plugin.increment,k=a.plugin.formatKey,n=a.plugin.formatSeed,l=c.util.createBuffer();a.key=null;e()};a.generateSync=function(b){var d=a.plugin.cipher,e=a.plugin.increment,g=a.plugin.formatKey,h=a.plugin.formatSeed;a.key=null;for(var f=c.util.createBuffer();f.length()<b;){1048575<a.generated&&(a.key=null);null===a.key&&(32<=a.pools[0].messageLength||a.collect(a.seedFileSync(32-a.pools[0].messageLength<<5)),k());var n=d(a.key,a.seed);a.generated+=n.length;f.putBytes(n);a.key=g(d(a.key,
e(a.seed)));a.seed=h(d(a.key,a.seed))}return f.getBytes(b)};d?(a.seedFile=function(a,b){d.randomBytes(a,function(a,c){if(a)return b(a);b(null,c.toString())})},a.seedFileSync=function(a){return d.randomBytes(a).toString()}):(a.seedFile=function(a,b){try{b(null,l(a))}catch(c){b(c)}},a.seedFileSync=l);a.collect=function(b){for(var c=b.length,d=0;d<c;++d)a.pools[a.pool].update(b.substr(d,1)),a.pool=31===a.pool?0:a.pool+1};a.collectInt=function(b,c){for(var d="",g=0;g<c;g+=8)d+=String.fromCharCode(b>>
g&255);a.collect(d)};a.registerWorker=function(b){b===self?a.seedFile=function(a,b){function c(a){a=a.data;a.forge&&a.forge.prng&&(self.removeEventListener("message",c),b(a.forge.prng.err,a.forge.prng.bytes))}self.addEventListener("message",c);self.postMessage({forge:{prng:{needed:a}}})}:b.addEventListener("message",function(c){c=c.data;c.forge&&c.forge.prng&&a.seedFile(c.forge.prng.needed,function(a,c){b.postMessage({forge:{prng:{err:a,bytes:c}}})})})};return a}}if("function"!==typeof define)if("object"===
typeof module&&module.exports){var q=!0;define=function(c,f){f(require,module)}}else return"undefined"===typeof forge&&(forge={}),k(forge);var m,r=function(c,f){f.exports=function(d){var f=m.map(function(b){return c(b)}).concat(k);d=d||{};d.defined=d.defined||{};if(d.defined.prng)return d.prng;d.defined.prng=!0;for(var b=0;b<f.length;++b)f[b](d);return d.prng}},u=define;define=function(c,f){m="string"===typeof c?f.slice(2):c.slice(2);if(q)return delete define,u.apply(null,Array.prototype.slice.call(arguments,
0));define=u;return define.apply(null,Array.prototype.slice.call(arguments,0))};define(["require","module","./md","./util"],function(){r.apply(null,Array.prototype.slice.call(arguments,0))})})();(function(){function k(c){c.random&&c.random.getBytes||function(f){function d(){var a=c.prng.create(k);a.getBytes=function(b,c){return a.generate(b,c)};a.getBytesSync=function(b){return a.generate(b)};return a}var k={},b=Array(4),m=c.util.createBuffer();k.formatKey=function(a){var b=c.util.createBuffer(a);a=Array(4);a[0]=b.getInt32();a[1]=b.getInt32();a[2]=b.getInt32();a[3]=b.getInt32();return c.aes._expandKey(a,!1)};k.formatSeed=function(a){var b=c.util.createBuffer(a);a=Array(4);a[0]=b.getInt32();
a[1]=b.getInt32();a[2]=b.getInt32();a[3]=b.getInt32();return a};k.cipher=function(a,d){c.aes._updateBlock(a,d,b,!1);m.putInt32(b[0]);m.putInt32(b[1]);m.putInt32(b[2]);m.putInt32(b[3]);return m.getBytes()};k.increment=function(a){++a[3];return a};k.md=c.md.sha256;var l=d(),a="undefined"!==typeof process&&process.versions&&process.versions.node,g=null;if("undefined"!==typeof window){var h=window.crypto||window.msCrypto;h&&h.getRandomValues&&(g=function(a){return h.getRandomValues(a)})}if(c.disableNativeCode||
!a&&!g){l.collectInt(+new Date,32);if("undefined"!==typeof navigator){var a="",p;for(p in navigator)try{"string"==typeof navigator[p]&&(a+=navigator[p])}catch(t){}l.collect(a);a=null}f&&(f().mousemove(function(a){l.collectInt(a.clientX,16);l.collectInt(a.clientY,16)}),f().keypress(function(a){l.collectInt(a.charCode,8)}))}if(c.random)for(p in l)c.random[p]=l[p];else c.random=l;c.random.createInstance=d}("undefined"!==typeof jQuery?jQuery:null)}if("function"!==typeof define)if("object"===typeof module&&
module.exports){var q=!0;define=function(c,f){f(require,module)}}else return"undefined"===typeof forge&&(forge={}),k(forge);var m,r=function(c,f){f.exports=function(d){var f=m.map(function(b){return c(b)}).concat(k);d=d||{};d.defined=d.defined||{};if(d.defined.random)return d.random;d.defined.random=!0;for(var b=0;b<f.length;++b)f[b](d);return d.random}},u=define;define=function(c,f){m="string"===typeof c?f.slice(2):c.slice(2);if(q)return delete define,u.apply(null,Array.prototype.slice.call(arguments,
0));define=u;return define.apply(null,Array.prototype.slice.call(arguments,0))};define("require module ./aes ./md ./prng ./util".split(" "),function(){r.apply(null,Array.prototype.slice.call(arguments,0))})})();(function(){function k(c){function f(d,b,f){f||(f=c.md.sha1.create());for(var k="",a=Math.ceil(b/f.digestLength),g=0;g<a;++g){var h=String.fromCharCode(g>>24&255,g>>16&255,g>>8&255,g&255);f.start();f.update(d+h);k+=f.digest().getBytes()}return k.substring(0,b)}var d=c.pkcs1=c.pkcs1||{};d.encode_rsa_oaep=function(d,b,k,l,a){var g,h,p,t;"string"===typeof k?(g=k,h=l||void 0,p=a||void 0):k&&(g=k.label||void 0,h=k.seed||void 0,p=k.md||void 0,k.mgf1&&k.mgf1.md&&(t=k.mgf1.md));p?p.start():p=c.md.sha1.create();
t||(t=p);d=Math.ceil(d.n.bitLength()/8);k=d-2*p.digestLength-2;if(b.length>k)throw t=Error("RSAES-OAEP input message length is too long."),t.length=b.length,t.maxLength=k,t;g||(g="");p.update(g,"raw");g=p.digest();l="";k-=b.length;for(a=0;a<k;a++)l+="\x00";b=g.getBytes()+l+"\u0001"+b;if(!h)h=c.random.getBytes(p.digestLength);else if(h.length!==p.digestLength)throw t=Error("Invalid RSAES-OAEP seed. The seed length must match the digest length."),t.seedLength=h.length,t.digestLength=p.digestLength,
t;d=f(h,d-p.digestLength-1,t);b=c.util.xorBytes(b,d,b.length);p=f(b,p.digestLength,t);return"\x00"+c.util.xorBytes(h,p,h.length)+b};d.decode_rsa_oaep=function(d,b,k,l){var a,g,h;"string"===typeof k?(a=k,g=l||void 0):k&&(a=k.label||void 0,g=k.md||void 0,k.mgf1&&k.mgf1.md&&(h=k.mgf1.md));k=Math.ceil(d.n.bitLength()/8);if(b.length!==k)throw h=Error("RSAES-OAEP encoded message length is invalid."),h.length=b.length,h.expectedLength=k,h;void 0===g?g=c.md.sha1.create():g.start();h||(h=g);if(k<2*g.digestLength+
2)throw Error("RSAES-OAEP key is too short for the hash function.");a||(a="");g.update(a,"raw");a=g.digest().getBytes();d=b.charAt(0);l=b.substring(1,g.digestLength+1);b=b.substring(1+g.digestLength);var p=f(b,g.digestLength,h);l=c.util.xorBytes(l,p,l.length);h=f(l,k-g.digestLength-1,h);b=c.util.xorBytes(b,h,b.length);k=b.substring(0,g.digestLength);h="\x00"!==d;for(d=0;d<g.digestLength;++d)h|=a.charAt(d)!==k.charAt(d);a=1;for(g=d=g.digestLength;g<b.length;g++)k=b.charCodeAt(g),l=k&1^1,h|=k&(a?65534:
0),a&=l,d+=a;if(h||1!==b.charCodeAt(d))throw Error("Invalid RSAES-OAEP padding.");return b.substring(d+1)}}if("function"!==typeof define)if("object"===typeof module&&module.exports){var q=!0;define=function(c,f){f(require,module)}}else return"undefined"===typeof forge&&(forge={}),k(forge);var m,r=function(c,f){f.exports=function(d){var f=m.map(function(b){return c(b)}).concat(k);d=d||{};d.defined=d.defined||{};if(d.defined.pkcs1)return d.pkcs1;d.defined.pkcs1=!0;for(var b=0;b<f.length;++b)f[b](d);
return d.pkcs1}},u=define;define=function(c,f){m="string"===typeof c?f.slice(2):c.slice(2);if(q)return delete define,u.apply(null,Array.prototype.slice.call(arguments,0));define=u;return define.apply(null,Array.prototype.slice.call(arguments,0))};define(["require","module","./util","./random","./sha1"],function(){r.apply(null,Array.prototype.slice.call(arguments,0))})})();(function(){function k(c){function f(d,g,e,h){var l=k(d,g),m=0,n=b(l.bitLength());"millerRabinTests"in e&&(n=e.millerRabinTests);var z=10;"maxBlockTime"in e&&(z=e.maxBlockTime);var q=+new Date;do{l.bitLength()>d&&(l=k(d,g));if(l.isProbablePrime(n))return h(null,l);l.dAddOffset(a[m++%8],0)}while(0>z||+new Date-q<z);c.util.setImmediate(function(){f(d,g,e,h)})}function d(a,b,d,g){function h(){function c(e){if(!r){--f;var h=e.data;if(h.found){for(e=0;e<d.length;++e)d[e].terminate();r=!0;return g(null,
new l(h.prime,16))}m.bitLength()>a&&(m=k(a,b));h=m.toString(16);e.target.postMessage({hex:h,workLoad:z});m.dAddOffset(q,0)}}n=Math.max(1,n);for(var d=[],e=0;e<n;++e)d[e]=new Worker(s);for(var f=n,e=0;e<n;++e)d[e].addEventListener("message",c);var r=!1}if("undefined"===typeof Worker)return f(a,b,d,g);var m=k(a,b),n=d.workers,z=d.workLoad||100,q=30*z/8,s=d.workerScript||"forge/prime.worker.js";if(-1===n)return c.util.estimateCores(function(a,b){a&&(b=2);n=b-1;h()});h()}function k(a,b){var c=new l(a,
b),d=a-1;c.testBit(d)||c.bitwiseTo(l.ONE.shiftLeft(d),h,c);c.dAddOffset(31-c.mod(g).byteValue(),0);return c}function b(a){return 100>=a?27:150>=a?18:200>=a?15:250>=a?12:300>=a?9:350>=a?8:400>=a?7:500>=a?6:600>=a?5:800>=a?4:1250>=a?3:2}if(!c.prime){var m=c.prime=c.prime||{},l=c.jsbn.BigInteger,a=[6,4,2,4,2,4,6,2],g=new l(null);g.fromInt(30);var h=function(a,b){return a|b};m.generateProbablePrime=function(a,b,e){"function"===typeof b&&(e=b,b={});b=b||{};var g=b.algorithm||"PRIMEINC";"string"===typeof g&&
(g={name:g});g.options=g.options||{};var h=b.prng||c.random;b={nextBytes:function(a){for(var b=h.getBytesSync(a.length),c=0;c<a.length;++c)a[c]=b.charCodeAt(c)}};if("PRIMEINC"===g.name)return"workers"in g.options?d(a,b,g.options,e):f(a,b,g.options,e);throw Error("Invalid prime generation algorithm: "+g.name);}}}if("function"!==typeof define)if("object"===typeof module&&module.exports){var q=!0;define=function(c,f){f(require,module)}}else return"undefined"===typeof forge&&(forge={}),k(forge);var m,
r=function(c,f){f.exports=function(d){var f=m.map(function(b){return c(b)}).concat(k);d=d||{};d.defined=d.defined||{};if(d.defined.prime)return d.prime;d.defined.prime=!0;for(var b=0;b<f.length;++b)f[b](d);return d.prime}},u=define;define=function(c,f){m="string"===typeof c?f.slice(2):c.slice(2);if(q)return delete define,u.apply(null,Array.prototype.slice.call(arguments,0));define=u;return define.apply(null,Array.prototype.slice.call(arguments,0))};define(["require","module","./util","./jsbn","./random"],
function(){r.apply(null,Array.prototype.slice.call(arguments,0))})})();(function(){function k(c){function f(a,b,d){var e=c.util.createBuffer();b=Math.ceil(b.n.bitLength()/8);if(a.length>b-11)throw e=Error("Message is too long for PKCS#1 v1.5 padding."),e.length=a.length,e.max=b-11,e;e.putByte(0);e.putByte(d);b=b-3-a.length;if(0===d||1===d){d=0===d?0:255;for(var g=0;g<b;++g)e.putByte(d)}else for(;0<b;){for(var h=0,f=c.random.getBytes(b),g=0;g<b;++g)d=f.charCodeAt(g),0===d?++h:e.putByte(d);b=h}e.putByte(0);e.putBytes(a);return e}function d(a,b,d,e){b=Math.ceil(b.n.bitLength()/
8);a=c.util.createBuffer(a);var g=a.getByte(),h=a.getByte();if(0!==g||d&&0!==h&&1!==h||!d&&2!=h||d&&0===h&&"undefined"===typeof e)throw Error("Encryption block is invalid.");d=0;if(0===h)for(d=b-3-e,e=0;e<d;++e){if(0!==a.getByte())throw Error("Encryption block is invalid.");}else if(1===h)for(d=0;1<a.length();){if(255!==a.getByte()){--a.read;break}++d}else if(2===h)for(d=0;1<a.length();){if(0===a.getByte()){--a.read;break}++d}if(0!==a.getByte()||d!==b-3-a.length())throw Error("Encryption block is invalid.");
return a.getBytes()}function k(a,b,d){function e(){h(a.pBits,function(b,c){if(b)return d(b);a.p=c;if(null!==a.q)return f(b,a.q);h(a.qBits,f)})}function h(a,b){c.prime.generateProbablePrime(a,p,b)}function f(b,c){if(b)return d(b);a.q=c;if(0>a.p.compareTo(a.q)){var k=a.p;a.p=a.q;a.q=k}0!==a.p.subtract(l.ONE).gcd(a.e).compareTo(l.ONE)?(a.p=null,e()):0!==a.q.subtract(l.ONE).gcd(a.e).compareTo(l.ONE)?(a.q=null,h(a.qBits,f)):(a.p1=a.p.subtract(l.ONE),a.q1=a.q.subtract(l.ONE),a.phi=a.p1.multiply(a.q1),0!==
a.phi.gcd(a.e).compareTo(l.ONE)?(a.p=a.q=null,e()):(a.n=a.p.multiply(a.q),a.n.bitLength()!==a.bits?(a.q=null,h(a.qBits,f)):(k=a.e.modInverse(a.phi),a.keys={privateKey:g.rsa.setPrivateKey(a.n,a.e,k,a.p,a.q,k.mod(a.p1),k.mod(a.q1),a.q.modInverse(a.p)),publicKey:g.rsa.setPublicKey(a.n,a.e)},d(null,a.keys))))}"function"===typeof b&&(d=b,b={});b=b||{};var p={algorithm:{name:b.algorithm||"PRIMEINC",options:{workers:b.workers||2,workLoad:b.workLoad||100,workerScript:b.workerScript}}};"prng"in b&&(p.prng=
b.prng);e()}function b(a){a=a.toString(16);"8"<=a[0]&&(a="00"+a);return c.util.hexToBytes(a)}function m(a){return 100>=a?27:150>=a?18:200>=a?15:250>=a?12:300>=a?9:350>=a?8:400>=a?7:500>=a?6:600>=a?5:800>=a?4:1250>=a?3:2}if("undefined"===typeof l)var l=c.jsbn.BigInteger;var a=c.asn1;c.pki=c.pki||{};c.pki.rsa=c.rsa=c.rsa||{};var g=c.pki,h=[6,4,2,4,2,4,6,2],p={name:"PrivateKeyInfo",tagClass:a.Class.UNIVERSAL,type:a.Type.SEQUENCE,constructed:!0,value:[{name:"PrivateKeyInfo.version",tagClass:a.Class.UNIVERSAL,
type:a.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"PrivateKeyInfo.privateKeyAlgorithm",tagClass:a.Class.UNIVERSAL,type:a.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:a.Class.UNIVERSAL,type:a.Type.OID,constructed:!1,capture:"privateKeyOid"}]},{name:"PrivateKeyInfo",tagClass:a.Class.UNIVERSAL,type:a.Type.OCTETSTRING,constructed:!1,capture:"privateKey"}]},t={name:"RSAPrivateKey",tagClass:a.Class.UNIVERSAL,type:a.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPrivateKey.version",
tagClass:a.Class.UNIVERSAL,type:a.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"RSAPrivateKey.modulus",tagClass:a.Class.UNIVERSAL,type:a.Type.INTEGER,constructed:!1,capture:"privateKeyModulus"},{name:"RSAPrivateKey.publicExponent",tagClass:a.Class.UNIVERSAL,type:a.Type.INTEGER,constructed:!1,capture:"privateKeyPublicExponent"},{name:"RSAPrivateKey.privateExponent",tagClass:a.Class.UNIVERSAL,type:a.Type.INTEGER,constructed:!1,capture:"privateKeyPrivateExponent"},{name:"RSAPrivateKey.prime1",
tagClass:a.Class.UNIVERSAL,type:a.Type.INTEGER,constructed:!1,capture:"privateKeyPrime1"},{name:"RSAPrivateKey.prime2",tagClass:a.Class.UNIVERSAL,type:a.Type.INTEGER,constructed:!1,capture:"privateKeyPrime2"},{name:"RSAPrivateKey.exponent1",tagClass:a.Class.UNIVERSAL,type:a.Type.INTEGER,constructed:!1,capture:"privateKeyExponent1"},{name:"RSAPrivateKey.exponent2",tagClass:a.Class.UNIVERSAL,type:a.Type.INTEGER,constructed:!1,capture:"privateKeyExponent2"},{name:"RSAPrivateKey.coefficient",tagClass:a.Class.UNIVERSAL,
type:a.Type.INTEGER,constructed:!1,capture:"privateKeyCoefficient"}]},e={name:"RSAPublicKey",tagClass:a.Class.UNIVERSAL,type:a.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPublicKey.modulus",tagClass:a.Class.UNIVERSAL,type:a.Type.INTEGER,constructed:!1,capture:"publicKeyModulus"},{name:"RSAPublicKey.exponent",tagClass:a.Class.UNIVERSAL,type:a.Type.INTEGER,constructed:!1,capture:"publicKeyExponent"}]},q=c.pki.rsa.publicKeyValidator={name:"SubjectPublicKeyInfo",tagClass:a.Class.UNIVERSAL,type:a.Type.SEQUENCE,
constructed:!0,captureAsn1:"subjectPublicKeyInfo",value:[{name:"SubjectPublicKeyInfo.AlgorithmIdentifier",tagClass:a.Class.UNIVERSAL,type:a.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:a.Class.UNIVERSAL,type:a.Type.OID,constructed:!1,capture:"publicKeyOid"}]},{name:"SubjectPublicKeyInfo.subjectPublicKey",tagClass:a.Class.UNIVERSAL,type:a.Type.BITSTRING,constructed:!1,value:[{name:"SubjectPublicKeyInfo.subjectPublicKey.RSAPublicKey",tagClass:a.Class.UNIVERSAL,
type:a.Type.SEQUENCE,constructed:!0,optional:!0,captureAsn1:"rsaPublicKey"}]}]},r=function(b){var c;if(b.algorithm in g.oids)c=g.oids[b.algorithm];else throw c=Error("Unknown message digest algorithm."),c.algorithm=b.algorithm,c;var d=a.oidToDer(c).getBytes();c=a.create(a.Class.UNIVERSAL,a.Type.SEQUENCE,!0,[]);var e=a.create(a.Class.UNIVERSAL,a.Type.SEQUENCE,!0,[]);e.value.push(a.create(a.Class.UNIVERSAL,a.Type.OID,!1,d));e.value.push(a.create(a.Class.UNIVERSAL,a.Type.NULL,!1,""));b=a.create(a.Class.UNIVERSAL,
a.Type.OCTETSTRING,!1,b.digest().getBytes());c.value.push(e);c.value.push(b);return a.toDer(c).getBytes()},u=function(a,b,d){if(d)return a.modPow(b.e,b.n);if(!b.p||!b.q)return a.modPow(b.d,b.n);b.dP||(b.dP=b.d.mod(b.p.subtract(l.ONE)));b.dQ||(b.dQ=b.d.mod(b.q.subtract(l.ONE)));b.qInv||(b.qInv=b.q.modInverse(b.p));do d=(new l(c.util.bytesToHex(c.random.getBytes(b.n.bitLength()/8)),16)).mod(b.n);while(d.equals(l.ZERO));a=a.multiply(d.modPow(b.e,b.n)).mod(b.n);var e=a.mod(b.p).modPow(b.dP,b.p);for(a=
a.mod(b.q).modPow(b.dQ,b.q);0>e.compareTo(a);)e=e.add(b.p);a=e.subtract(a).multiply(b.qInv).mod(b.p).multiply(b.q).add(a);return a=a.multiply(d.modInverse(b.n)).mod(b.n)};g.rsa.encrypt=function(a,b,d){var e=d,g=Math.ceil(b.n.bitLength()/8);!1!==d&&!0!==d?(e=2===d,d=f(a,b,d)):(d=c.util.createBuffer(),d.putBytes(a));a=new l(d.toHex(),16);b=u(a,b,e).toString(16);e=c.util.createBuffer();for(g-=Math.ceil(b.length/2);0<g;)e.putByte(0),--g;e.putBytes(c.util.hexToBytes(b));return e.getBytes()};g.rsa.decrypt=
function(a,b,e,g){var h=Math.ceil(b.n.bitLength()/8);if(a.length!==h)throw b=Error("Encrypted message length is invalid."),b.length=a.length,b.expected=h,b;a=new l(c.util.createBuffer(a).toHex(),16);if(0<=a.compareTo(b.n))throw Error("Encrypted message is invalid.");a=u(a,b,e).toString(16);for(var f=c.util.createBuffer(),h=h-Math.ceil(a.length/2);0<h;)f.putByte(0),--h;f.putBytes(c.util.hexToBytes(a));return!1!==g?d(f.getBytes(),b,e):f.getBytes()};g.rsa.createKeyPairGenerationState=function(a,b,d){"string"===
typeof a&&(a=parseInt(a,10));a=a||2048;d=d||{};var e=d.prng||c.random,g={nextBytes:function(a){for(var b=e.getBytesSync(a.length),c=0;c<a.length;++c)a[c]=b.charCodeAt(c)}};d=d.algorithm||"PRIMEINC";if("PRIMEINC"===d)a={algorithm:d,state:0,bits:a,rng:g,eInt:b||65537,e:new l(null),p:null,q:null,qBits:a>>1,pBits:a-(a>>1),pqState:0,num:null,keys:null},a.e.fromInt(a.eInt);else throw Error("Invalid key generation algorithm: "+d);return a};g.rsa.stepKeyPairGenerationState=function(a,b){"algorithm"in a||
(a.algorithm="PRIMEINC");var c=new l(null);c.fromInt(30);for(var d=0,e=function(a,b){return a|b},f=+new Date,k,p=0;null===a.keys&&(0>=b||p<b);){if(0===a.state){k=null===a.p?a.pBits:a.qBits;var t=k-1;0===a.pqState?(a.num=new l(k,a.rng),a.num.testBit(t)||a.num.bitwiseTo(l.ONE.shiftLeft(t),e,a.num),a.num.dAddOffset(31-a.num.mod(c).byteValue(),0),d=0,++a.pqState):1===a.pqState?a.num.bitLength()>k?a.pqState=0:a.num.isProbablePrime(m(a.num.bitLength()))?++a.pqState:a.num.dAddOffset(h[d++%8],0):2===a.pqState?
a.pqState=0===a.num.subtract(l.ONE).gcd(a.e).compareTo(l.ONE)?3:0:3===a.pqState&&(a.pqState=0,null===a.p?a.p=a.num:a.q=a.num,null!==a.p&&null!==a.q&&++a.state,a.num=null)}else 1===a.state?(0>a.p.compareTo(a.q)&&(a.num=a.p,a.p=a.q,a.q=a.num),++a.state):2===a.state?(a.p1=a.p.subtract(l.ONE),a.q1=a.q.subtract(l.ONE),a.phi=a.p1.multiply(a.q1),++a.state):3===a.state?0===a.phi.gcd(a.e).compareTo(l.ONE)?++a.state:(a.p=null,a.q=null,a.state=0):4===a.state?(a.n=a.p.multiply(a.q),a.n.bitLength()===a.bits?++a.state:
(a.q=null,a.state=0)):5===a.state&&(k=a.e.modInverse(a.phi),a.keys={privateKey:g.rsa.setPrivateKey(a.n,a.e,k,a.p,a.q,k.mod(a.p1),k.mod(a.q1),a.q.modInverse(a.p)),publicKey:g.rsa.setPublicKey(a.n,a.e)});k=+new Date;p+=k-f;f=k}return null!==a.keys};g.rsa.generateKeyPair=function(a,b,c,d){1===arguments.length?"object"===typeof a?(c=a,a=void 0):"function"===typeof a&&(d=a,a=void 0):2===arguments.length?"number"===typeof a?"function"===typeof b?(d=b,b=void 0):"number"!==typeof b&&(c=b,b=void 0):(c=a,d=
b,b=a=void 0):3===arguments.length&&("number"===typeof b?"function"===typeof c&&(d=c,c=void 0):(d=c,c=b,b=void 0));c=c||{};void 0===a&&(a=c.bits||2048);void 0===b&&(b=c.e||65537);var e=g.rsa.createKeyPairGenerationState(a,b,c);if(!d)return g.rsa.stepKeyPairGenerationState(e,0),e.keys;k(e,c,d)};g.setRsaPublicKey=g.rsa.setPublicKey=function(b,e){var h={n:b,e:e,encrypt:function(a,b,d){"string"===typeof b?b=b.toUpperCase():void 0===b&&(b="RSAES-PKCS1-V1_5");if("RSAES-PKCS1-V1_5"===b)b={encode:function(a,
b,c){return f(a,b,2).getBytes()}};else if("RSA-OAEP"===b||"RSAES-OAEP"===b)b={encode:function(a,b){return c.pkcs1.encode_rsa_oaep(b,a,d)}};else if(-1!==["RAW","NONE","NULL",null].indexOf(b))b={encode:function(a){return a}};else if("string"===typeof b)throw Error('Unsupported encryption scheme: "'+b+'".');a=b.encode(a,h,!0);return g.rsa.encrypt(a,h,!0)},verify:function(b,c,e){"string"===typeof e?e=e.toUpperCase():void 0===e&&(e="RSASSA-PKCS1-V1_5");if("RSASSA-PKCS1-V1_5"===e)e={verify:function(b,c){c=
d(c,h,!0);var e=a.fromDer(c);return b===e.value[1].value}};else if("NONE"===e||"NULL"===e||null===e)e={verify:function(a,b){b=d(b,h,!0);return a===b}};c=g.rsa.decrypt(c,h,!0,!1);return e.verify(b,c,h.n.bitLength())}};return h};g.setRsaPrivateKey=g.rsa.setPrivateKey=function(a,b,e,h,f,k,p,t){var l={n:a,e:b,d:e,p:h,q:f,dP:k,dQ:p,qInv:t,decrypt:function(a,b,e){"string"===typeof b?b=b.toUpperCase():void 0===b&&(b="RSAES-PKCS1-V1_5");a=g.rsa.decrypt(a,l,!1,!1);if("RSAES-PKCS1-V1_5"===b)b={decode:d};else if("RSA-OAEP"===
b||"RSAES-OAEP"===b)b={decode:function(a,b){return c.pkcs1.decode_rsa_oaep(b,a,e)}};else if(-1!==["RAW","NONE","NULL",null].indexOf(b))b={decode:function(a){return a}};else throw Error('Unsupported encryption scheme: "'+b+'".');return b.decode(a,l,!1)},sign:function(a,b){var c=!1;"string"===typeof b&&(b=b.toUpperCase());if(void 0===b||"RSASSA-PKCS1-V1_5"===b)b={encode:r},c=1;else if("NONE"===b||"NULL"===b||null===b)b={encode:function(){return a}},c=1;var d=b.encode(a,l.n.bitLength());return g.rsa.encrypt(d,
l,c)}};return l};g.wrapRsaPrivateKey=function(b){return a.create(a.Class.UNIVERSAL,a.Type.SEQUENCE,!0,[a.create(a.Class.UNIVERSAL,a.Type.INTEGER,!1,a.integerToDer(0).getBytes()),a.create(a.Class.UNIVERSAL,a.Type.SEQUENCE,!0,[a.create(a.Class.UNIVERSAL,a.Type.OID,!1,a.oidToDer(g.oids.rsaEncryption).getBytes()),a.create(a.Class.UNIVERSAL,a.Type.NULL,!1,"")]),a.create(a.Class.UNIVERSAL,a.Type.OCTETSTRING,!1,a.toDer(b).getBytes())])};g.privateKeyFromAsn1=function(b){var d={},e=[];a.validate(b,p,d,e)&&
(b=a.fromDer(c.util.createBuffer(d.privateKey)));d={};e=[];if(!a.validate(b,t,d,e))throw d=Error("Cannot read private key. ASN.1 object does not contain an RSAPrivateKey."),d.errors=e,d;var h,f,k,m,q,e=c.util.createBuffer(d.privateKeyModulus).toHex();b=c.util.createBuffer(d.privateKeyPublicExponent).toHex();h=c.util.createBuffer(d.privateKeyPrivateExponent).toHex();f=c.util.createBuffer(d.privateKeyPrime1).toHex();k=c.util.createBuffer(d.privateKeyPrime2).toHex();m=c.util.createBuffer(d.privateKeyExponent1).toHex();
q=c.util.createBuffer(d.privateKeyExponent2).toHex();d=c.util.createBuffer(d.privateKeyCoefficient).toHex();return g.setRsaPrivateKey(new l(e,16),new l(b,16),new l(h,16),new l(f,16),new l(k,16),new l(m,16),new l(q,16),new l(d,16))};g.privateKeyToAsn1=g.privateKeyToRSAPrivateKey=function(c){return a.create(a.Class.UNIVERSAL,a.Type.SEQUENCE,!0,[a.create(a.Class.UNIVERSAL,a.Type.INTEGER,!1,a.integerToDer(0).getBytes()),a.create(a.Class.UNIVERSAL,a.Type.INTEGER,!1,b(c.n)),a.create(a.Class.UNIVERSAL,a.Type.INTEGER,
!1,b(c.e)),a.create(a.Class.UNIVERSAL,a.Type.INTEGER,!1,b(c.d)),a.create(a.Class.UNIVERSAL,a.Type.INTEGER,!1,b(c.p)),a.create(a.Class.UNIVERSAL,a.Type.INTEGER,!1,b(c.q)),a.create(a.Class.UNIVERSAL,a.Type.INTEGER,!1,b(c.dP)),a.create(a.Class.UNIVERSAL,a.Type.INTEGER,!1,b(c.dQ)),a.create(a.Class.UNIVERSAL,a.Type.INTEGER,!1,b(c.qInv))])};g.publicKeyFromAsn1=function(b){var d={},h=[];if(a.validate(b,q,d,h)){h=a.derToOid(d.publicKeyOid);if(h!==g.oids.rsaEncryption)throw d=Error("Cannot read public key. Unknown OID."),
d.oid=h,d;b=d.rsaPublicKey}h=[];if(!a.validate(b,e,d,h))throw d=Error("Cannot read public key. ASN.1 object does not contain an RSAPublicKey."),d.errors=h,d;h=c.util.createBuffer(d.publicKeyModulus).toHex();d=c.util.createBuffer(d.publicKeyExponent).toHex();return g.setRsaPublicKey(new l(h,16),new l(d,16))};g.publicKeyToAsn1=g.publicKeyToSubjectPublicKeyInfo=function(b){return a.create(a.Class.UNIVERSAL,a.Type.SEQUENCE,!0,[a.create(a.Class.UNIVERSAL,a.Type.SEQUENCE,!0,[a.create(a.Class.UNIVERSAL,
a.Type.OID,!1,a.oidToDer(g.oids.rsaEncryption).getBytes()),a.create(a.Class.UNIVERSAL,a.Type.NULL,!1,"")]),a.create(a.Class.UNIVERSAL,a.Type.BITSTRING,!1,[g.publicKeyToRSAPublicKey(b)])])};g.publicKeyToRSAPublicKey=function(c){return a.create(a.Class.UNIVERSAL,a.Type.SEQUENCE,!0,[a.create(a.Class.UNIVERSAL,a.Type.INTEGER,!1,b(c.n)),a.create(a.Class.UNIVERSAL,a.Type.INTEGER,!1,b(c.e))])}}if("function"!==typeof define)if("object"===typeof module&&module.exports){var q=!0;define=function(c,f){f(require,
module)}}else return"undefined"===typeof forge&&(forge={}),k(forge);var m,r=function(c,f){f.exports=function(d){var f=m.map(function(b){return c(b)}).concat(k);d=d||{};d.defined=d.defined||{};if(d.defined.rsa)return d.rsa;d.defined.rsa=!0;for(var b=0;b<f.length;++b)f[b](d);return d.rsa}},u=define;define=function(c,f){m="string"===typeof c?f.slice(2):c.slice(2);if(q)return delete define,u.apply(null,Array.prototype.slice.call(arguments,0));define=u;return define.apply(null,Array.prototype.slice.call(arguments,
0))};define("require module ./asn1 ./jsbn ./oids ./pkcs1 ./prime ./random ./util".split(" "),function(){r.apply(null,Array.prototype.slice.call(arguments,0))})})();(function(k,q){function m(a,b,c){var d=v.sha256.create();d.update(a);d.update(b);return d.digest().getBytes(c)}function r(a){var b=typeof a;if("object"!=b||null===a)return"string"==b&&(a=a.replace(/\\/g,"\\\\"),a=a.replace(/"/g,'\\"'),a=a.replace(/\t/g,"\\t"),a=a.replace(/\r/g,"\\r"),a=a.replace(/\n/g,"\\n"),a='"'+a+'"'),String(a);var c,d,e=[],f=a&&a.constructor==Array;for(c in a)d=a[c],b=typeof d,"string"==b?(d=d.replace(/\\/g,"\\\\"),d=d.replace(/"/g,'\\"'),d=d.replace(/\t/g,"\\t"),d=d.replace(/\r/g,
"\\r"),d=d.replace(/\n/g,"\\n"),d='"'+d+'"'):"object"==b&&null!==d&&(d=r(d)),"function"!=b&&e.push((f?"":'"'+c+'":')+String(d));return(f?"[":"{")+String(e)+(f?"]":"}")}"nxtssc";var u=k.forge,c=u.util,f=u.random,d=u.asn1,v=u.md,b=u.cipher,s={};k.nxtssc=s;var l=u.pki.publicKeyFromAsn1(d.fromDer(c.decode64("MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEA1U4RcJZqtGjDDxJfSEASNiMsq6sCRnkGc9mkh55r/D3A/E5WqY5dUzSjeyOSnx0H4+wQ1qFBhrfL/qQfFgr0Go7RXkUA3P7sICVUqinXUmI+oiJZKbvU0BBpCwoH2OLq7DLir61yLExIYXnbNoo6M2zv2TS8wA7D5//OpTC4h8Kx7k3qo7QuB5QMOcDFEgnOKbej26y+u2jjZw3eMlBLMg3maGalizdfmv3RnfqLIR9NCb9lTVAxbTtVEPaAI7gQ5KSQDihLRk8WUPTsoMgoWyL76AbTO+EaguSL0zVgZG/H36wgRLCo7rx3yfkQ1Z1rriyMUgwDl0hSIwPzDHwCSQIDAQAB"))),
a=JSON&&'"\uac00"'==JSON.stringify("\uac00")?JSON.stringify:r;s.create=function(){return{reset:function(){this.encNonce1=this.nonce1=this.sid=null;this.inited=!1},init:function(){var a=f.getBytesSync(20);this.sid=c.binary.hex.encode(a);this.nonce1=f.getBytesSync(32);a=l.encrypt(this.nonce1);this.encNonce1=a=c.encode64(a);return{sid:this.sid,nonce:this.encNonce1}},initDone:function(a){if("string"===typeof a)try{a=q.parseJSON(a)}catch(b){throw Error("invalid data:parseJSON error");}if(null==a)throw Error("invalid data:null");
if(null!=a.error)throw Error("["+a.error.code+"]"+a.error.message);if(null==a.nonce)throw Error("invalid data.nonce:null");this._generateKey(a.nonce);if(null==a.mac)throw Error("invalid data.mac:null");if(!this._verifyMac(a.mac))return Error("mac verify fail");this.inited=!0},isInited:function(){return this.inited},encrypt:function(b){if(!this.inited)throw Error("not inited");if(null==b)throw Error("data is null");"string"!==typeof b&&(b=a(b));return{sid:this.sid,data:this._encryptData(b)}},decrypt:function(a){if("string"===
typeof a)try{a=q.parseJSON(a)}catch(b){throw Error("invalid data:parseJSON error");}if(null==a)throw Error("data is null");if(null!=a.error)return a;if(!this.inited)throw Error("not inited");a=c.decodeUtf8(this._decryptData(a.data));return a=q.parseJSON(a)},_generateKey:function(a){this.nonce2=c.decode64(a);a=v.sha256.create();a.update(c.createBuffer(this.nonce1).getBytes());a.update(c.createBuffer(this.nonce2).getBytes());a=a.digest().getBytes();this.ekey=m("ktnet nxts key 1",a,16);this.dkey=m("ktnet nxts key 2",
a,16);this.eiv=m("ktnet nxts iv 1",a,16);this.div=m("ktnet nxts iv 2",a,16)},_verifyMac:function(a){a=this._decryptData(a);if(0==a.length)return!1;var b=v.sha256.create();b.update("ktnet nxts mac");b.update(c.createBuffer(this.nonce1).getBytes());b=b.digest().getBytes();a:if(a.length!=b.length)a=!1;else{for(var d=0;d<a.length;d++)if(a[d]!=b[d]){a=!1;break a}a=!0}return a},_encryptData:function(a){var d=b.createCipher("AES-CBC",this.ekey);d.start({iv:this.eiv});a=c.createBuffer(a,"utf8");d.update(a);
d.finish();return c.encode64(d.output.getBytes())},_decryptData:function(a){if(null==a)return null;a=c.decode64(a);var d=b.createDecipher("AES-CBC",this.dkey);d.start({iv:this.div});d.update(c.createBuffer(a));d.finish();return d.output.getBytes()}}}})(window,jQuery);var nxTSConfig={version:{}};nxTSConfig.version.nx="1,0,0,1";nxTSConfig.version.tstoolkit="2,0,6,4";nxTSConfig.version.tsxmltoolkit="3,0,0,6";nxTSConfig.version.axtsclientx="1,1,3,3";nxTSConfig.timeout=7500;nxTSConfig.serverAddress="127.0.0.1";nxTSConfig.serverPort="17107";nxTSConfig.serverProtocol="https://";nxTSConfig.serviceUrl="/service";nxTSConfig.scUrl="/sc";nxTSConfig.processingImageUrl="../img/processing.gif";nxTSConfig.installPage="../install/";nxTSConfig.supportSync=!0;
nxTSConfig.getResultInterval=1500;nxTSConfig.getResultTimeout=3E3;nxTSConfig.getVersionTimeout=5E3;nxTSConfig.scInitTimeout=3E3;nxTSConfig.installPage="../install";nxTSConfig.TSTOOLKIT="tstoolkit";nxTSConfig.TSXMLTOOLKIT="tsxmltoolkit";nxTSConfig.AXTSCLIENTX="axtsclientx";nxTSConfig.ridSc=-1;nxTSConfig.ridVer=-2;nxTSConfig.LOG_ERROR=1;nxTSConfig.LOG_INFO=2;nxTSConfig.LOG_DEBUG=3;nxTSConfig.logLevel=0;nxTSConfig.disableInstallConfirmMessage=!1;
nxTSConfig.getServiceUrl=function(){return this.serverProtocol+this.serverAddress+":"+this.serverPort+this.serviceUrl};nxTSConfig.getScUrl=function(){return this.serverProtocol+this.serverAddress+":"+this.serverPort+this.scUrl};var nxTSError={base:-1};nxTSError.res_timeout=nxTSError.base++;nxTSError.res_success=nxTSError.base++;nxTSError.res_error=nxTSError.base++;nxTSError.res_pending=nxTSError.base++;nxTSError.res_param=nxTSError.base++;nxTSError.res_json_parse=nxTSError.base++;
nxTSError.res_module_error=nxTSError.base++;nxTSError.res_asyncfail=nxTSError.base++;nxTSError.res_sc_error=nxTSError.base++;nxTSError.res_not_impl=nxTSError.base++;
var nxTSMessage={installPage:"NX\uac00 \uc124\uce58 \ub418\uc9c0 \uc54a\uc558\uc2b5\ub2c8\ub2e4 \uc124\uce58\ud398\uc774\uc9c0\ub85c \uc774\ub3d9\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?",iframeTimeout:"\uc751\ub2f5\uc774 \uc9c0\uc5f0\ub418\uc5c8\uc2b5\ub2c8\ub2e4 \uc7a0\uc2dc\ud6c4 \ub2e4\uc2dc \uc2dc\ub3c4\ud574\uc8fc\uc138\uc694.(iframe)",ajaxTimeout:"\uc751\ub2f5\uc774 \uc9c0\uc5f0\ub418\uc5c8\uc2b5\ub2c8\ub2e4 \uc7a0\uc2dc\ud6c4 \ub2e4\uc2dc \uc2dc\ub3c4\ud574\uc8fc\uc138\uc694."};
function nxTS_getBrowserInfo(){var k={MSIE:!1,Edge:!1,Navigator:!1,Firefox:!1,Chrome:!1,Safari:!1,Opera:!1,ChromePlus:!1,ETC:!1,name:"unknown",version:"-1"};try{var q=-1,m="";if("Microsoft Internet Explorer"==navigator.appName)k.MSIE=!0,k.name="MSIE",q=navigator.userAgent.indexOf(k.name)+k.name.length+1,m=navigator.userAgent.substring(q),q=m.indexOf(";"),0>q&&(q=m.indexOf(")")),k.version=m.substring(0,q),navigator.userAgent.match(/Trident/i)&&0<k.version.indexOf("Windows")&&(k.ETC=!0,q=navigator.userAgent.lastIndexOf("rv:")+
3,m=navigator.userAgent.substring(q),q=m.indexOf(")"),0>q&&(q=m.indexOf(" ")),k.version=m.substring(0,q));else if(navigator.userAgent.match(/Edge/i))k.Edge=!0,k.name="Edge",q=navigator.userAgent.lastIndexOf(k.name)+k.name.length+1,m=navigator.userAgent.substring(q),k.version=m,q=m.indexOf(" "),0<q&&(k.version=m.substring(0,q));else if(navigator.userAgent.match(/Navigator/i))k.Navigator=!0,k.name="Navigator",q=navigator.userAgent.lastIndexOf(k.name)+k.name.length+1,m=navigator.userAgent.substring(q),
k.version=m,q=m.indexOf(" "),0<q&&(k.version=m.substring(0,q));else if(navigator.userAgent.match(/OPR/i))k.Opera=!0,k.name="Opera",q=navigator.userAgent.lastIndexOf("OPR")+3+1,m=navigator.userAgent.substring(q),k.version=m,q=m.indexOf(" "),0<q&&(k.version=m.substring(0,q));else if(navigator.userAgent.match(/Firefox/i))k.Firefox=!0,k.name="Firefox",q=navigator.userAgent.lastIndexOf(k.name)+k.name.length+1,m=navigator.userAgent.substring(q),k.version=m,q=m.indexOf(" "),0<q&&(k.version=m.substring(0,
q));else if(navigator.userAgent.match(/Chrome/i))k.Chrome=!0,k.name="Chrome",navigator.userAgent.match(/ChromePlus/i)&&(k.ChromePlus=!0,k.name="ChromePlus"),q=navigator.userAgent.lastIndexOf(k.name)+k.name.length+1,m=navigator.userAgent.substring(q),k.version=m,q=m.indexOf(" "),0<q&&(k.version=m.substring(0,q));else if(navigator.userAgent.match(/Safari/i))k.Safari=!0,k.name="Safari",q=navigator.userAgent.lastIndexOf("Version")+7+1,m=navigator.userAgent.substring(q),k.version=m,q=m.indexOf(" "),0<
q&&(k.version=m.substring(0,q));else if(navigator.userAgent.match(/Opera/i))k.Opera=!0,k.name=navigator.appName,q=navigator.userAgent.lastIndexOf("Version")+7+1,m=navigator.userAgent.substring(q),k.version=m,q=m.indexOf(" "),0<q&&(k.version=m.substring(0,q));else if(navigator.userAgent.match(/Trident/i)){k.MSIE=!0;k.name="MSIE";q=navigator.userAgent.lastIndexOf("rv:")+3;2>=q&&(q=navigator.userAgent.indexOf(k.name)+k.name.length+1);m=navigator.userAgent.substring(q);q=m.indexOf(")");if(0>q||10<q)q=
m.indexOf(";");if(0>q||10<q)q=m.indexOf(" ");k.version=m.substring(0,q)}else k.ETC=!0,k.name=navigator.appName,k.version="NOT_OK"}catch(r){alert("DC_getBrowserInfo["+r.description+"]")}return k}
function nxTS_getPlatformInfo(){var k={Windows:!1,Linux:!1,Ubuntu:!1,Fedora:!1,Mac:!1,iOS:!1,Android:!1,Mobile:!1,x64:!1,type:"unknown",name:"unknown"};k.name=navigator.platform;navigator.appVersion.match("WOW64")&&(k.name="WOW64");if(k.name.match(/Win32/i)||k.name.match(/WOW64/i))k.Windows=!0,k.type="Windows",navigator.appVersion.match(/Win64/i)&&(k.name="Win64",k.x64=!0,k.type="Windows64");else if(k.name.match("Win64"))k.Windows=!0,k.x64=!0,k.type="Windows64";else if(k.name.match("Linux armv"))k.Mobile=
!0,k.Android=!0,k.type="Android";else if(k.name.match(/Linux/i))k.Linux=!0,k.type="Linux",k.name.match(/x86_64/i)?(k.x64=!0,k.type="Linux64"):navigator.userAgent.match(/x86_64/i)&&(k.x64=!0,k.type="Linux64"),navigator.userAgent.match(/Fedora/i)?(k.Fedora=!0,k.type="Fedora",k.x64&&(k.type="Fedora64")):navigator.userAgent.match(/Ubuntu/i)?(k.Ubuntu=!0,k.type="Ubuntu",k.x64&&(k.type="Ubuntu64")):navigator.userAgent.match(/Android/i)&&(k.Linux=!1,k.Mobile=!0,k.Android=!0,k.type="Android");else if(k.name.match(/MacIntel/i))k.Mac=
!0,k.type="Mac";else if("iPad"==k.name||"iPhone"==k.name||"iPod"==k.name||"iOS"==k.name)k.Mobile=!0,k.iOS=!0,k.type="iOS";if(navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPod/i)||navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/Android/i))k.Mobile=!0;if(navigator.userAgent.match(/Windows Phone/i)||navigator.userAgent.match(/Windows CE/i)||navigator.userAgent.match(/Symbian/i)||navigator.userAgent.match(/BlackBerry/i))k.Mobile=!0;navigator.userAgent.match("Android")&&
navigator.userAgent.match("Opera Mini")&&(k.Mobile=!0,k.Android=!0,k.type="Android");return k}Array.prototype.indexOf=Array.prototype.indexOf||function(k,q){for(var m=q||0,r=this.length;m<r;m++)if(this[m]===k)return m;return-1};var JSON=JSON||{};
JSON.stringify=JSON.stringify||function(k){var q=typeof k;if("object"!=q||null===k)return"string"==q&&(k=k.replace(/\\/g,"\\\\"),k=k.replace(/"/g,'\\"'),k=k.replace(/\t/g,"\\t"),k=k.replace(/\r/g,"\\r"),k=k.replace(/\n/g,"\\n"),k='"'+k+'"'),String(k);var m,r,u=[],c=k&&k.constructor==Array;for(m in k)r=k[m],q=typeof r,"string"==q?(r=r.replace(/\\/g,"\\\\"),r=r.replace(/"/g,'\\"'),r=r.replace(/\t/g,"\\t"),r=r.replace(/\r/g,"\\r"),r=r.replace(/\n/g,"\\n"),r='"'+r+'"'):"object"==q&&null!==r&&(r=JSON.stringify(r)),
"function"!=q&&u.push((c?"":'"'+m+'":')+String(r));return(c?"[":"{")+String(u)+(c?"]":"}")};
(function(){function k(){this.data={};this.reqCtx={};this.callback=function(){alert("callback undefined")};this.success=function(a,b){v.checkSuccess(a,b)};this.error=void 0;this.onsuccess=function(a){this.success=a;return this};this.onerror=function(a){this.error=a;return this};this.invoke=function(){f.invoke(this)}}function q(a){try{var b=$.parseJSON(a.data);u.process(b.rid,b)}catch(d){}}var m=m||{};m.maskPassword=function(a){try{if("object"!=typeof a)return a;var b=$.extend(!0,{},a),d;for(d in b)if("object"==
typeof b[d])b[d]=m.maskPassword(b[d]);else if(d.match(/ssn/i)||d.match(/pwd/i)||d.match(/password/i))b[d]=Array(b[d].length+1).join("*");return b}catch(c){return a}};m.isGetResultCmd=function(a){return void 0==a||void 0==a.data||void 0==a.data.cmd?!1:0<=a.data.cmd.indexOf(".getResult")?!0:!1};m.isSupportCrossDomainAjax=function(){if(!1==nxTSConfig.supportSync)return!1;var a=nxTS_getPlatformInfo(),b=nxTS_getBrowserInfo();return!0!=a.Windows||!0!=b.MSIE||11<=b.version&&!1==b.ETC?!0:!1};m.versionCompare=
function(a,b){for(var d=a.split(/\.|,/),c=b.split(/\.|,/),f=Math.min(d.length,c.length),e=0;e<f;e++){var k=parseInt(d[e],10),l=parseInt(c[e],10);if(k!=l)return k-l}if(d.length==c.length)return 0;for(e=f;e<d.length;e++)if(k=parseInt(d[e],10),0!=k)return 1;for(e=f;e<c.length;e++)if(l=parseInt(c[e],10),0!=l)return-1;return 0};m.timer=function(a,b){this._int=a;this._fn=b;this._id=-1;this.start=function(){0<=this._id||(this._id=setInterval(this._fn,this._int))};this.stop=function(){0<=this._id&&(clearInterval(this._id),
this._id=-1)}};m.showError=function(a,b){if(a.code==nxTSError.res_success)return!0;if(a.code==nxTSError.res_timeout)return alert(nxTSMessage.ajaxTimeout),!1;alert("["+(b||"Error")+"]  Code = "+a.code+", errorMessage = "+a.errorMessage);return!1};m.getDate=function(){return void 0==Date.now?+new Date:Date.now()};var r=r||function(){function a(a,b){a=a||"";b=b||"";try{if(void 0!=console){nxTS_getPlatformInfo();var d=nxTS_getBrowserInfo();"object"==typeof b&&8>=d.version&&!0==d.MSIE&&(b=JSON.stringify(b));
console.log(a);""!=b&&console.log(b);console.log("")}}catch(c){}}var b=nxTSConfig.logLevel||0;return{dd:function(d,c){1023>b||a("[D]"+d,c)},d:function(d,c){3>b||a("[D]"+d,c)},i:function(d,c){2>b||a("[I]"+d,c)},e:function(d,c){1>b||a("[E]"+d,c)},setLogLevel:function(a){b=a}}}(),u=function(a){var b={},d=[];b.tiemoutProcess=function(a){this.process(a,{code:nxTSError.res_timeout,errorMessage:"timeout"},a)};b.add=function(a,b){var c={ctime:m.getDate(),rid:a,ctx:b};d.push(c)};b.process=function(b,f){for(var e=
0;e<d.length;e++){var g=d[e];if((void 0!=g||null!=g)&&g.rid==b)if(delete d[e],d.splice(e,1),r.dd("nxIframeRequestStore","elapsed time : "+(m.getDate()-g.ctime)/1E3+"sec"),a("#"+g.ctx.frameName).remove(),f.code==nxTSError.res_success)s.asyncSuccessProcess(f,g.ctx);else if(f.code==nxTSError.res_pending){try{g.ctx.obj.startGetResultTimer(b,g.ctx.etc)}catch(k){r.e("iFrame Process : ",k)}c.add(b,g.ctx)}else s.errorProcess(f,g.ctx)}};return b}(jQuery),c=function(a){a={};var b=[];a.add=function(a,d){var c=
{ctime:m.getDate(),rid:a,ctx:d};b.push(c)};a.isEmpty=function(){return 0==b.length?!0:!1};a.process=function(a,d){for(var c=0;c<b.length;c++){var e=b[c];if((void 0!=e||null!=e)&&e.rid==a)return delete b[c],b.splice(c,1),d.data.code!=nxTSError.res_success&&r.e("GetResult",d.data),r.dd("nxAsyncRequestStore","elapsed time : "+(m.getDate()-e.ctime)/1E3+"sec"),e.ctx.callback(d.data,e.ctx),!0}return!1};return a}(jQuery),f=function(a){function b(a,d){var c="frame_name_"+m.getDate();a.frameName=c;u.add(a.data.rid,
a);c=new f(nxTSConfig.getServiceUrl(),c);c.addParam("data",d);c.send();var g=a.data.rid;setTimeout(function(){u.tiemoutProcess(g)},a.ajaxto||nxTSConfig.timeout)}function f(b,d){var c=this;c.time=(new Date).getTime();c.form=a('<form accept-charset="UTF-8" style="width:1px;height:1px;display:none" action="'+b+'" target="'+d+'" method="post"  id="nxtstoolkit_form'+c.time+'"></form>');c.addParam=function(b,d){a('<input type="hidden"/>').attr("name",b).attr("value",d).appendTo(c.form)};c.send=function(){var b=
a('<iframe src=""  style="width:1px;height:1px;display:none" data-time="'+d+'" id="'+d+'" name="'+d+'"></iframe>');a("body").append(b);a("body").append(c.form);c.form.get(0).submit();b.load(function(){try{a("#nxtstoolkit_form"+a(this).data("time")).remove()}catch(b){var d=a("#nxtstoolkit_form"+a(this).data("time"));0<d.length&&document.body.removeChild(d[0])}try{a(this).remove()}catch(c){d=a(this),0<d.length&&document.body.removeChild(d[0])}})}}function k(b,d){try{var f={};f.reqCtx=b;f.data={data:d};
f.url=b.reqUrl||nxTSConfig.getServiceUrl();f.timeout=b.ajaxto||nxTSConfig.timeout;f.contentType="application/json";!0==m.isSupportCrossDomainAjax()?(f.dataType="json",f.type="POST"):f.dataType="jsonp";f.success=function(a){if(a.code==nxTSError.res_success)s.ajaxSuccessProcess(a,this.reqCtx);else if(a.code==nxTSError.res_pending){try{this.reqCtx.obj.startGetResultTimer(this.reqCtx.data.rid,this.reqCtx.etc)}catch(b){r.e("ajax Process : ",b)}c.add(this.reqCtx.data.rid,this.reqCtx)}else s.errorProcess(a,
this.reqCtx)};f.error=function(a,b,d){r.dd("ajax error",b+","+a.responseText);"error"==b&&r.e("ajax error",JSON.stringify(a));s.errorProcess({code:nxTSError.res_timeout,errorMessage:b,data:a},this.reqCtx)};return a.ajax(f)}catch(g){alert(g)}}return{invoke:function(c){m.isGetResultCmd(c)||r.dd("nxComm.invoke",c);if(-1==c.data.cmd.indexOf("common.")){var e=d.encrypt(c.data.data);c.data=a.extend({},c.data,e)}if(!1==m.isSupportCrossDomainAjax()&&1024<JSON.stringify(c.data).length)return c.data.rtype=
"iframe",b(c,JSON.stringify(c.data));c.data.rtype="json";return k(c,JSON.stringify(c.data))}}}(jQuery),d=function(){var a,c="",f=0,k=nxtssc.create(),l=!1,c="sid_"+m.getDate();return{isInit:function(){return l},setInit:function(a){l=a;b.clear()},isEnableSecureChannel:function(){return!0},getSid:function(){return c},nextRid:function(){f++;return f},encrypt:function(a){return!1==this.isEnableSecureChannel()?a:k.encrypt(a)},decrypt:function(a){return!1==this.isEnableSecureChannel()?a:k.decrypt(a)},initSc:function(){var b=
k.init();if(void 0==b||void 0==b.sid)return!1;c=b.sid;a=b;return!0},initSecureChannel:function(c,f){function g(a,c){b.decCounter(nxTSConfig.ridSc);0==a.code&&(k.initDone(a.data),d.setInit(!0),c.success=c.orgSuccess);c.orgSuccess(a,c)}if(!1==this.isEnableSecureChannel())c.success({code:nxTSError.res_success});else if(!1==d.initSc())c.success({code:nxTSError.res_sc_error,errorMessage:"sc init fail"},c);else{c=c||{};c.obj=v;c.orgSuccess=c.success;var h=s.createCommand("common","init",a,c).onsuccess(g);
h.reqUrl=nxTSConfig.getScUrl();h.invoke();b.incCounter(nxTSConfig.ridSc,f)}}}}(),v=function(){var a={},c=[];a.callPostInit=function(){if(0!=c.length){for(var a=0;a<c.length;a++)c[a]();c=[]}};a.onInit=function(a){"function"==typeof a&&(!1==d.isInit()?c.push(a):a())};a.startGetResultTimer=function(a,c){var d=this._getResultTimer;setTimeout(function(){d.start()},s.getResultInterval);b.incCounter(a,c)};a.stopGetResultTimer=function(a){this._getResultTimer.stop();b.decCounter(a)};a.checkSuccess=function(a,
b){a.code==nxTSError.res_success?b.callback==s.getResultCompleteProcess?b.callback(a,b):b.callback(a.data,b):a.code!=nxTSError.res_timeout&&(a.code==nxTSError.res_sc_error?(d.setInit(!1),!0==m.isGetResultCmd(b)?b.obj.stopGetResultTimer(a.rid):m.showError(a,"Result Check")):m.showError(a,"Result Check"))};return a}(),b=function(a){var b={},c=[];b.incCounter=function(b,d){d=d||{};var e="boolean"===typeof d.transparentDisableBrowser?d.transparentDisableBrowser:!1;!1!=("boolean"===typeof d.disableBrowser?
d.disableBrowser:!0)&&(0==c.length&&nxTS_disableBrowser(e),-1==a.inArray(b,c)&&c.push(b))};b.decCounter=function(b){b=a.inArray(b,c);0<=b&&(delete c[b],c.splice(b,1));0==c.length&&nxTS_enableBrowser()};b.clear=function(){c=[];nxTS_enableBrowser()};return b}(jQuery),s=function(a){var f=!1;return{goInstallPage:function(a,b){!0!=nxTSConfig.disableInstallConfirmMessage&&!0!=f&&(a=a||nxTSMessage.installMessage,!0==confirm(a)?(f=!0,b=b||nxTSConfig.installPage,window.location.href=b):f=!1)},asyncSuccessProcess:function(a,
b,c){"boolean"==typeof c&&c?b.callback(a.data,b):(!0==a.enc&&(c=d.decrypt(a.data),a.data=c),void 0!=a.data&&void 0!=a.data.code&&a.data.code!=nxTSError.res_success&&r.e("Result",a.data),b.success(a,b))},ajaxSuccessProcess:function(a,b){if(!0==a.enc){var c=d.decrypt(a.data);a.data=c}void 0!=a.data&&void 0!=a.data.code&&a.data.code!=nxTSError.res_success&&r.e("Result",a.data);b.success(a,b)},userErrorProcess:function(a,b){return!1},errorProcess:function(a,c){if(void 0==nxTS_errorProcess||!0!=nxTS_errorProcess(a,
c)){var f=c.data.rid;if(a.code==nxTSError.res_sc_error)b.clear(),c.obj.stopGetResultTimer(f),m.isGetResultCmd(c),d.setInit(!1);else if(a.code==nxTSError.res_timeout&&"iframe"==c.data.rtype)b.clear(),c.obj.stopGetResultTimer(f),alert(nxTSMessage.iframeTimeout),d.setInit(!1);else if(a.code!=nxTSError.res_timeout||!0!=m.isGetResultCmd(c))a.code!=nxTSError.res_success&&!0==m.isGetResultCmd(c)?(b.clear(),c.obj.stopGetResultTimer(f),m.showError(a,"ErrorProcess")):void 0!=c.error?c.error(a,c):(b.clear(),
m.showError(a,"ErrorProcess"))}},getVersion:function(a){a=a||{};return this.createCommand("common","nxGetVersion",{},a)},installCheck:function(b,c){c=c||{};c.versionCheck=c.versionCheck||[];this.getVersion(c).onsuccess(function(b){b=b.data;b.status={};b.status.nx=!0;b.status[nxTSConfig.TSTOOLKIT]=!0;b.status[nxTSConfig.TSXMLTOOLKIT]=!0;b.status[nxTSConfig.AXTSCLIENTX]=!0;0>m.versionCompare(b.nx,nxTSConfig.version.nx)?(b.status.nx=!1,c.success({code:nxTSError.res_error,data:b})):0<=a.inArray(nxTSConfig.TSTOOLKIT,
c.versionCheck)&&0>m.versionCompare(b.tstoolkit,nxTSConfig.version.tstoolkit)?(b.status[nxTSConfig.TSTOOLKIT]=!1,c.success({code:nxTSError.res_error,data:b})):0<=a.inArray(nxTSConfig.TSXMLTOOLKIT,c.versionCheck)&&0>m.versionCompare(b.tsxmltoolkit,nxTSConfig.version.tsxmltoolkit)?(b.status[nxTSConfig.TSXMLTOOLKIT]=!1,c.success({code:nxTSError.res_error,data:b})):0<=a.inArray(nxTSConfig.AXTSCLIENTX,c.versionCheck)&&0>m.versionCompare(b.axtsclientx,nxTSConfig.version.axtsclientx)?(b.status[nxTSConfig.AXTSCLIENTX]=
!1,c.success({code:nxTSError.res_error,data:b})):c.success({code:nxTSError.res_success,data:b})}).onerror(function(a,b){a.nx="0,0,0,0";a[nxTSConfig.TSTOOLKIT]=a.nx;a[nxTSConfig.TSXMLTOOLKIT]=a.nx;a[nxTSConfig.AXTSCLIENTX]=a.nx;c.success({code:nxTSError.res_timeout,data:a})}).invoke()},getResultCompleteProcess:function(a,d){if(0!=a.data.length){r.dd("getResultCompleteProcess","data length = "+a.data.length);for(var f=0;f<a.data.length;f++){var e=a.data[f];!0==c.process(e.rid,{code:a.code,data:e.data})&&
b.decCounter(e.rid)}}!0==c.isEmpty()&&void 0!=d&&d.obj.stopGetResultTimer(0)},createCommand:function(b,c,f,e){e=e||{};f={cmd:b+"."+c,rid:d.nextRid(),sid:d.getSid(),data:f};e.data=f;return e=a.extend({},new k,e)},init:function(c,f){b.incCounter(-1,c);var g={ajaxto:nxTSConfig.getVersionTimeout,versionCheck:[]},g=a.extend({},g,c);g.success=function(e){e.code!=nxTSError.res_success?(s.goInstallPage(c.installMessage,c.installPage),b.decCounter(nxTSConfig.ridSc)):(e={ajaxto:nxTSConfig.scInitTimeout},e.success=
f,e=a.extend({},e,c),d.initSecureChannel(e,c))};s.installCheck(!1,g)},backupOrgFunctions:function(a,b){for(var c in b){var d=b[c];a["_par_"+d]=a[d]}},createProxyFunctions:function(a,b,c,d){for(var f in d)(function(d){b[d]=function(){var e="_par_"+d,f=a[e],g=arguments,k=b[c];void 0!=k&&"function"==typeof k?k(e,f,g):alert("common function call fail")}})(d[f])},updateConfig:function(a){nxTSConfig.version.nx=a.version.nx;nxTSConfig.version.tstoolkit=a.version.tstoolkit||nxTSConfig.version.tstoolkit;nxTSConfig.version.tsxmltoolkit=
a.version.tsxmltoolkit||nxTSConfig.version.tsxmltoolkit;nxTSConfig.version.axtsclientx=a.version.axtsclientx||nxTSConfig.version.axtsclientx;nxTSConfig.installPage=a.installPage;nxTSConfig.processingImageUrl=a.processingImageUrl}}}(jQuery),l=l||{};l.disableBrowser=function(a,b){a="boolean"===typeof a?a:!1;if(!(null!=jQuery("#nxts_overlay")&&0<jQuery("#nxts_overlay").length)){var c='<div id="nxts_overlay" style="text-align:center; z-index:100000;position:fixed; width:100%; height:100%; top:0px; left:0px; background-color: #000000; opacity: '+
(a?"0":"0.3")+"; filter: alpha(opacity="+(a?"0":"30")+');"></div>',d="";b&&nxTSConfig.processingImageUrl&&!1==a?(d+='<div id="nxts_overlay_msg" style="text-align:center; z-index:100001;position:fixed;top:50%; height:100%;width:100%;"><div style="margin: 0 auto; padding: 5px; width:150px; display:inline-table; overflow:visible; background-color:#fff; vertical-align:middle; font-weight:bold; text-align: center; color:#555;  border-radius:5px;">',d+=b,d+=' <img src="'+nxTSConfig.processingImageUrl+'" style="vertical-align:middle"/></div>',
d+="</div>"):nxTSConfig.processingImageUrl&&!1==a&&(d+='<div id="nxts_overlay_msg" style="text-align:center; z-index:100001;position:fixed;top:50%; height:100%;width:100%;"> <img src="'+nxTSConfig.processingImageUrl+'" style="vertical-align:middle"/></div>');jQuery("body").append(d);jQuery("body").append(c)}};l.enableBrowser=function(){jQuery("#nxts_overlay").remove();jQuery("#nxts_overlay_msg").remove()};window.nxTSCommon=s;window.nxTSCommonObj=v;window.nxTSUtil=m;window.nxTSLog=r;window.nxTSSession=
d;window.nxTSBrowserDisableCounter=b;window.nxts_get_result_complete_callback=s.getResultCompleteProcess;window.nxTS_disableBrowser=window.nxTS_disableBrowser||l.disableBrowser;window.nxTS_enableBrowser=window.nxTS_enableBrowser||l.enableBrowser;window.nxTS_errorProcess=s.userErrorProcess;window.addEventListener?window.addEventListener("message",q,!1):window.attachEvent&&window.attachEvent("onmessage",q)})();
